(self.webpackChunkrbt_1=self.webpackChunkrbt_1||[]).push([[1148],{2218:(t,e,o)=>{"use strict";o.d(e,{k:()=>x});var n=o(1855),i=o(3709),s=o(3606),a=o(3991),r=o(427),c=o(4683),l=o(6274),d=o(4988);function h(t,e){if(1&t&&(s.TgZ(0,"ion-row"),s.TgZ(1,"ion-col",5),s._uU(2,"Time:"),s.qZA(),s.TgZ(3,"ion-col",6),s._uU(4),s.qZA(),s.qZA()),2&t){const t=s.oxw();s.xp6(4),s.Oqu(t.time)}}function u(t,e){if(1&t&&(s.TgZ(0,"ion-select-option",22),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.s9C("value",t),s.xp6(1),s.Oqu(t)}}function g(t,e){if(1&t){const t=s.EpF();s.ynx(0),s.TgZ(1,"form",15),s.NdJ("ngSubmit",function(){s.CHM(t);const e=s.MAs(12),o=s.MAs(7);return s.oxw(3).logForm(e.value,o.value)}),s.TgZ(2,"ion-item"),s.TgZ(3,"ion-label"),s._uU(4,"Note:"),s.qZA(),s._UZ(5,"ion-input",16),s.qZA(),s._UZ(6,"input",17,18),s.TgZ(8,"ion-item"),s.TgZ(9,"ion-label"),s._uU(10,"Sched Type:"),s.qZA(),s.TgZ(11,"ion-select",null,19),s.YNc(13,u,2,2,"ion-select-option",20),s.qZA(),s.qZA(),s.TgZ(14,"ion-button",21),s._uU(15,"Approve"),s.qZA(),s.qZA(),s.BQk()}if(2&t){const t=s.oxw(2).index,e=s.oxw();s.xp6(5),s.s9C("value",e.arrData[t][5]),s.xp6(1),s.s9C("value",e.arrData[t][0]),s.xp6(7),s.Q6J("ngForOf",e.arrData[t][1])}}function m(t,e){1&t&&s._UZ(0,"ion-input",16),2&t&&s.s9C("value",e.$implicit)}function p(t,e){if(1&t&&(s.TgZ(0,"ion-item"),s.TgZ(1,"ion-label"),s._uU(2,"Note:"),s.qZA(),s._UZ(3,"ion-input",16),s.qZA(),s.TgZ(4,"ion-item"),s.TgZ(5,"ion-label"),s._uU(6,"Status:"),s.qZA(),s._UZ(7,"ion-input",16),s.qZA(),s.TgZ(8,"ion-item"),s.TgZ(9,"ion-label"),s._uU(10,"Sched Type:"),s.qZA(),s.YNc(11,m,1,1,"ion-input",23),s.qZA()),2&t){const t=s.oxw(2).index,e=s.oxw();s.xp6(3),s.s9C("value",e.arrData[t][5]),s.xp6(4),s.s9C("value",e.arrData[t][6]),s.xp6(4),s.Q6J("ngForOf",e.arrData[t][1])}}function Z(t,e){if(1&t&&(s.TgZ(0,"ion-col",12),s.TgZ(1,"ion-item"),s.TgZ(2,"p"),s.TgZ(3,"strong"),s._uU(4),s.qZA(),s._uU(5," wants you to supervise his/her work at "),s.TgZ(6,"strong"),s._uU(7),s.qZA(),s.qZA(),s.qZA(),s.YNc(8,g,16,3,"ng-container",13),s.YNc(9,p,12,3,"ng-template",null,14,s.W1O),s.qZA()),2&t){const t=s.MAs(10),e=s.oxw().index,o=s.oxw();s.xp6(4),s.Oqu(o.arrData[e][2]),s.xp6(3),s.AsE("",o.arrData[e][3]," at ",o.arrData[e][4]," "),s.xp6(1),s.Q6J("ngIf",""!=o.arrData[e][0])("ngIfElse",t)}}function f(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"ion-col",24),s.TgZ(1,"ion-item"),s.TgZ(2,"ion-label",25),s._uU(3,"RBT:"),s.qZA(),s._UZ(4,"ion-input",16),s.qZA(),s.TgZ(5,"ion-item"),s.TgZ(6,"ion-label",25),s._uU(7,"Company:"),s.qZA(),s._UZ(8,"ion-input",16),s.qZA(),s.TgZ(9,"ion-item"),s.TgZ(10,"ion-label",25),s._uU(11,"Time:"),s.qZA(),s._UZ(12,"ion-input",16),s.qZA(),s.TgZ(13,"ion-item"),s.TgZ(14,"ion-label",25),s._uU(15,"Note:"),s.qZA(),s.TgZ(16,"p"),s._uU(17),s.qZA(),s.TgZ(18,"ion-button",26),s.NdJ("click",function(){s.CHM(t);const e=s.oxw().index,o=s.oxw();return o.log(o.arrData[e][5],o.arrData[e][6])}),s._uU(19),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=s.oxw().index,e=s.oxw();s.xp6(4),s.s9C("value",e.arrData[t][0]),s.xp6(4),s.s9C("value",e.arrData[t][1]),s.xp6(4),s.s9C("value",e.arrData[t][2]),s.xp6(5),s.Oqu(e.arrData[t][3]),s.xp6(2),s.Oqu(e.arrData[t][4])}}function T(t,e){if(1&t&&(s.TgZ(0,"ion-row"),s.YNc(1,Z,11,5,"ion-col",10),s.YNc(2,f,20,5,"ng-template",null,11,s.W1O),s.qZA()),2&t){const t=s.MAs(3),e=s.oxw();s.xp6(1),s.Q6J("ngIf","x"!=e.time)("ngIfElse",t)}}let x=(()=>{class t{constructor(t,e,o,n,i,s,a,r){this.router=t,this.postPvd=e,this.toastController=o,this.menuCtrl=n,this.modalController=i,this.actionSheetController=s,this.alertController=a,this.plt=r}ngOnInit(){var t=this.yrmonth.split(" ");this.thisDay=t[0]+" "+this.day+", "+t[1],this.getData(this.time)}backButton(){this.modalController.dismiss({dismissed:!0})}getData(t){return""!=this.codesched?(this.title="Schedule Request",new Promise(t=>{let e={action:"fetchScheduleList",ucode:localStorage.getItem("UCODE"),schedcode:this.codesched,time:this.time,yrmonth:this.yrmonth,day:this.day};console.log(this.time),this.postPvd.postData(e,localStorage.getItem("HOMELINK")).subscribe(t=>{"ok"==t.status?this.arrData=t.details:this.openToaste("Error occured!")})})):(this.title="RBT Work Schedule",new Promise(t=>{let e={action:"fetchworkschedbcba",ucode:localStorage.getItem("UCODE"),date:this.thisDay};this.postPvd.postData(e,localStorage.getItem("HOMELINK")).subscribe(t=>{"ok"==t.status?(this.arrData=t.details,console.log(t.details)):this.openToaste("Error occured!")})}))}openToasts(t){return(0,n.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"<center>"+t+"</center>",duration:2e3,color:"success"})).present()})}openToaste(t){return(0,n.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"<center>"+t+"</center>",duration:2e3,color:"danger"})).present()})}doRefresh(t){setTimeout(()=>{this.getData(""),t.target.complete()},2e3)}logForm(t,e){if(""!=t)return new Promise(o=>{this.postPvd.postData({action:"approveSched",datacode:e,type:t},localStorage.getItem("HOMELINK")).subscribe(t=>{"ok"==t.status?(this.openToasts("The schedule is approve!"),setTimeout(()=>{this.getData("")},2e3)):this.openToaste("Error occured!")})});this.openToaste("Please select a sched type!")}log(t,e){this.goLog(e,t)}goLog(t,e){return(0,n.mG)(this,void 0,void 0,function*(){const o=yield this.modalController.create({component:i.G,componentProps:{ucode:localStorage.getItem("UCODE"),code:t,type:e}});return o.onDidDismiss().then(t=>{this.getData("")}),yield o.present()})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(a.F0),s.Y36(r.B),s.Y36(c.yF),s.Y36(c._q),s.Y36(c.IN),s.Y36(c.BX),s.Y36(c.Br),s.Y36(c.t4))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-bcba-calendar-modal-details"]],inputs:{codesched:"codesched",yrmonth:"yrmonth",day:"day",time:"time",title:"title"},decls:25,vars:4,consts:[["slot","start"],[3,"click"],["name","chevron-back-outline",1,"return"],["slot","fixed",3,"ionRefresh"],[1,"tblclass"],["size","3",1,"head"],["size","9",1,"head"],[4,"ngIf"],["size","12",1,"header-r"],[4,"ngFor","ngForOf"],["class","header-r1","size","12",4,"ngIf","ngIfElse"],["notime",""],["size","12",1,"header-r1"],[4,"ngIf","ngIfElse"],["thiselse",""],[3,"ngSubmit"],["readonly","",3,"value"],["type","hidden",3,"value"],["hdncode",""],["sel",""],[3,"value",4,"ngFor","ngForOf"],["button","","color","secondary","expand","block","type","submit"],[3,"value"],["readonly","",3,"value",4,"ngFor","ngForOf"],[1,"header-r1"],["position","stacked"],["size","small",3,"click"]],template:function(t,e){1&t&&(s.TgZ(0,"ion-header"),s.TgZ(1,"ion-toolbar"),s.TgZ(2,"ion-buttons",0),s.TgZ(3,"ion-button",1),s.NdJ("click",function(){return e.backButton()}),s._UZ(4,"ion-icon",2),s.TgZ(5,"ion-label"),s._uU(6,"Back"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(7,"ion-content"),s.TgZ(8,"ion-refresher",3),s.NdJ("ionRefresh",function(t){return e.doRefresh(t)}),s._UZ(9,"ion-refresher-content"),s.qZA(),s.TgZ(10,"ion-list"),s.TgZ(11,"ion-list-header"),s.TgZ(12,"ion-label"),s._uU(13),s.qZA(),s.qZA(),s.qZA(),s.TgZ(14,"ion-grid",4),s.TgZ(15,"ion-row"),s.TgZ(16,"ion-col",5),s._uU(17,"Date:"),s.qZA(),s.TgZ(18,"ion-col",6),s._uU(19),s.qZA(),s.qZA(),s.YNc(20,h,5,1,"ion-row",7),s.TgZ(21,"ion-row"),s.TgZ(22,"ion-col",8),s._uU(23,"Details"),s.qZA(),s.qZA(),s.YNc(24,T,4,2,"ion-row",9),s.qZA(),s.qZA()),2&t&&(s.xp6(13),s.Oqu(e.title),s.xp6(6),s.Oqu(e.thisDay),s.xp6(1),s.Q6J("ngIf","x"!=e.time),s.xp6(4),s.Q6J("ngForOf",e.arrData))},directives:[c.Gu,c.sr,c.Sm,c.YG,c.gu,c.Q$,c.W2,c.nJ,c.Wo,c.q_,c.yh,c.jY,c.Nd,c.wI,l.O5,l.sg,c.Ie,d._Y,d.JL,d.F,c.pK,c.j9,c.t9,c.QI,c.n0],styles:["ion-list-header[_ngcontent-%COMP%]{color:#202945;font-weight:500;font-family:Poetsen One;font-size:larger;text-align:center;margin-left:-10px!important}ion-button[_ngcontent-%COMP%]{text-transform:none;font-family:Poetsen One}ion-col[_ngcontent-%COMP%], ion-col[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{font-size:12px;text-align:justify}.head[_ngcontent-%COMP%]{font-weight:400;font-size:13px}.head[_ngcontent-%COMP%], .header-r[_ngcontent-%COMP%]{text-align:center;font-family:Poetsen One}.header-r[_ngcontent-%COMP%]{font-size:14px;background-color:#ffb444}.header-r[_ngcontent-%COMP%], .header-r1[_ngcontent-%COMP%]{border:1px solid #000}.header-r1[_ngcontent-%COMP%]{border-top:0!important}"]}),t})()},1148:(t,e,o)=>{"use strict";o.d(e,{t:()=>p});var n=o(1855),i=o(2218),s=o(3606),a=o(3991),r=o(427),c=o(4683),l=o(6274),d=o(4988);function h(t,e){if(1&t&&(s.TgZ(0,"ion-col",15),s._UZ(1,"ion-checkbox",16),s.qZA()),2&t){const t=s.oxw().index,e=s.oxw();s.xp6(1),s.hYB("value","",e.time1[t]," to ",e.time2[t],""),s.Q6J("ngModel",e.timeData[t])}}function u(t,e){if(1&t&&(s.TgZ(0,"ion-col",15),s._UZ(1,"ion-checkbox",17),s.qZA()),2&t){const t=s.oxw().index,e=s.oxw();s.xp6(1),s.hYB("value","",e.time1[t]," to ",e.time2[t],""),s.Q6J("ngModel",e.timeData[t])}}function g(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"ion-button",18),s.NdJ("click",function(){s.CHM(t);const e=s.oxw().index,o=s.oxw();return o.actionSheet(o.schedTime[e])}),s._UZ(1,"ion-icon",19),s.qZA()}}function m(t,e){if(1&t&&(s.TgZ(0,"ion-row"),s.TgZ(1,"ion-col",10),s._uU(2),s.qZA(),s.YNc(3,h,2,3,"ion-col",11),s.YNc(4,u,2,3,"ng-template",null,12,s.W1O),s.TgZ(6,"ion-col",13),s.YNc(7,g,2,0,"ion-button",14),s.qZA(),s.qZA()),2&t){const t=e.index,o=s.MAs(5),n=s.oxw();s.xp6(2),s.AsE("",n.time1[t]," to ",n.time2[t],""),s.xp6(1),s.Q6J("ngIf",0==n.exist[t])("ngIfElse",o),s.xp6(4),s.Q6J("ngIf",""!=n.schedTime[t])}}let p=(()=>{class t{constructor(t,e,o,n,i,s,a,r,c){this.router=t,this.postPvd=e,this.toastController=o,this.menuCtrl=n,this.location=i,this.modalController=s,this.alertController=a,this.plt=r,this.actionSheetCTRL=c}ngOnInit(){var t=this.yrmonth.split(" ");this.thisDay=t[0]+" "+this.day+" "+t[1],this.time1=["06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00"],this.time2=["06:59","07:59","08:59","09:59","10:59","11:59","12:59","13:59","14:59","15:59","16:59"],this.getData()}backButton(){this.modalController.dismiss({dismissed:!0})}getData(){return this.codesched?new Promise(t=>{let e={action:"fetchAvailables",ucode:localStorage.getItem("UCODE"),schedcode:this.codesched,company:this.company,date:this.thisDay};this.postPvd.postData(e,localStorage.getItem("HOMELINK")).subscribe(t=>{"ok"==t.status?(this.timeData=t.existingTime,this.schedTime=t.arrData,this.exist=t.exist,console.log(t)):this.openToaste("Error occured!")})}):(this.timeData=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],this.schedTime=["","","","","","","","","","",""],console.log(this.timeData),new Promise(t=>{let e={action:"ckExist",ucode:localStorage.getItem("UCODE"),schedcode:this.codesched,company:this.company,date:this.thisDay};this.postPvd.postData(e,localStorage.getItem("HOMELINK")).subscribe(t=>{"ok"==t.status?(this.exist=t.exist,console.log(t)):this.openToaste("Error occured!")})}))}presentAlertConfirm(){return(0,n.mG)(this,void 0,void 0,function*(){const t=yield this.alertController.create({cssClass:"my-custom-class",message:"Are you sure you want to set this as your availability time?",buttons:[{text:"No",role:"cancel",cssClass:"alertConfirm",handler:t=>{}},{text:"Yes",cssClass:"alertConfirm",handler:()=>{this.save()}}]});yield t.present()})}save(){var t=[],e=0;if($("ion-checkbox").each(function(){"true"==$(this).attr("aria-checked")?t.push($(this).val()):(t.push(""),e++)}),e<11)return this.ptname=this.plt.is("ios")?"ios":this.plt.is("android")?"android":"APP",new Promise(e=>{let o={action:"saveAvailability",ucode:localStorage.getItem("UCODE"),schedcode:this.codesched,company:this.company,timex:JSON.stringify(t),date:this.thisDay,ptname:this.ptname};this.postPvd.postData(o,localStorage.getItem("HOMELINK")).subscribe(t=>{"ok"==t.status?(this.codesched=t.schedcode,this.openToasts("Time availabilty has been saved.")):this.openToaste("Error occured!")})});this.openToaste("There is no selected available time.")}openToasts(t){return(0,n.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"<center>"+t+"</center>",duration:2e3,color:"success"})).present()})}openToaste(t){return(0,n.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"<center>"+t+"</center>",duration:2e3,color:"danger"})).present()})}openDetails(t){return(0,n.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:i.k,componentProps:{codesched:this.codesched,yrmonth:this.yrmonth,day:this.day,time:t}});return e.onDidDismiss().then(t=>{}),yield e.present()})}actionSheet(t){return(0,n.mG)(this,void 0,void 0,function*(){var e=t.split(","),o=[];for(let t=0;t<e.length;t++)o.push({text:e[t],cssClass:"actionSheet",handler:()=>{this.openDetails(e[t])}});const n=yield this.actionSheetCTRL.create({header:"Schedule requests",cssClass:"match-item-action-sheet",buttons:o});yield n.present(),yield n.onDidDismiss()})}doRefresh(t){setTimeout(()=>{this.getData(),t.target.complete()},2e3)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(a.F0),s.Y36(r.B),s.Y36(c.yF),s.Y36(c._q),s.Y36(l.Ye),s.Y36(c.IN),s.Y36(c.Br),s.Y36(c.t4),s.Y36(c.BX))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-bcba-calendar-modal"]],inputs:{codesched:"codesched",yrmonth:"yrmonth",day:"day",headertitle:"headertitle",company:"company"},decls:26,vars:3,consts:[["slot","start"],[3,"click"],["name","chevron-back-outline",1,"return"],[1,"tblclass"],["size","12",1,"head"],["size","5",1,"header-r"],["size","4",1,"header-r"],["size","3",1,"header"],[4,"ngFor","ngForOf"],["expand","block","color","secondary",3,"click"],["size","5",1,"header-r1"],["class","header-r1","size","4",4,"ngIf","ngIfElse"],["existElse",""],["size","3",1,"header1"],["size","small",3,"click",4,"ngIf"],["size","4",1,"header-r1"],[1,"ckbox",3,"ngModel","value"],["disabled","true",1,"ckbox",3,"ngModel","value"],["size","small",3,"click"],["name","eye-outline"]],template:function(t,e){1&t&&(s.TgZ(0,"ion-header"),s.TgZ(1,"ion-toolbar"),s.TgZ(2,"ion-buttons",0),s.TgZ(3,"ion-button",1),s.NdJ("click",function(){return e.backButton()}),s._UZ(4,"ion-icon",2),s.TgZ(5,"ion-label"),s._uU(6,"Back"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(7,"ion-content"),s.TgZ(8,"ion-list"),s.TgZ(9,"ion-list-header"),s.TgZ(10,"ion-label"),s._uU(11),s.qZA(),s.qZA(),s.qZA(),s.TgZ(12,"ion-grid",3),s.TgZ(13,"ion-row"),s.TgZ(14,"ion-col",4),s._uU(15),s.qZA(),s.qZA(),s.TgZ(16,"ion-row"),s.TgZ(17,"ion-col",5),s._uU(18,"Time"),s.qZA(),s.TgZ(19,"ion-col",6),s._uU(20,"Availability"),s.qZA(),s.TgZ(21,"ion-col",7),s._uU(22,"Action"),s.qZA(),s.qZA(),s.YNc(23,m,8,5,"ion-row",8),s.qZA(),s.TgZ(24,"ion-button",9),s.NdJ("click",function(){return e.presentAlertConfirm()}),s._uU(25,"Save"),s.qZA(),s.qZA()),2&t&&(s.xp6(11),s.Oqu(e.headertitle),s.xp6(4),s.Oqu(e.thisDay),s.xp6(8),s.Q6J("ngForOf",e.timeData))},directives:[c.Gu,c.sr,c.Sm,c.YG,c.gu,c.Q$,c.W2,c.q_,c.yh,c.jY,c.Nd,c.wI,l.sg,l.O5,c.nz,c.w,d.JJ,d.On],styles:["ion-list-header[_ngcontent-%COMP%]{color:#202945;font-weight:500;font-family:Poetsen One;font-size:larger;text-align:center;margin-left:-10px!important}ion-button[_ngcontent-%COMP%]{text-transform:none;font-family:Poetsen One}.head[_ngcontent-%COMP%]{font-weight:700}.head[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]{text-align:center;font-family:Poetsen One}.header[_ngcontent-%COMP%], .header-r[_ngcontent-%COMP%]{border:1px solid #000;font-size:12px;background-color:#ffb444}.header-r[_ngcontent-%COMP%]{border-right:0!important;text-align:center;font-family:Poetsen One}.header1[_ngcontent-%COMP%], .header-r1[_ngcontent-%COMP%]{border:1px solid #000;border-top:0!important;font-size:12px;text-align:center}.header-r1[_ngcontent-%COMP%]{border-right:0!important}"]}),t})()}}]);