(self.webpackChunkrbt_1=self.webpackChunkrbt_1||[]).push([[565],{565:(e,t,o)=>{"use strict";o.r(t),o.d(t,{WorkScheduleCreatePageModule:()=>m});var n=o(6274),i=o(4988),s=o(4683),a=o(3991),r=o(1855),l=o(3606),c=o(427);function d(e,t){if(1&e&&(l.TgZ(0,"ion-select-option",11),l._uU(1),l.qZA()),2&e){const e=t.$implicit;l.s9C("value",e[0]),l.xp6(1),l.Oqu(e[1])}}function g(e,t){if(1&e&&(l.TgZ(0,"ion-select-option",11),l._uU(1),l.qZA()),2&e){const e=t.$implicit;l.s9C("value",e[0]),l.xp6(1),l.Oqu(e[1])}}const p=function(){return{standalone:!0}},u=[{path:"",component:(()=>{class e{constructor(e,t,o,n,i,s,a){this.router=e,this.postPvd=t,this.toastController=o,this.menuCtrl=n,this.alertController=i,this.plt=s,this.location=a,this.show=!0}ngOnInit(){this.getCompany(),(new Date).getFullYear(),this.maxyr=(new Date).getFullYear()+5}backButton(){this.location.back()}openToasts(e){return(0,r.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"<center>"+e+"</center>",duration:2e3,color:"success"})).present()})}openToaste(e){return(0,r.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"<center>"+e+"</center>",duration:2e3,color:"danger"})).present()})}getCompany(){return new Promise(e=>{let t={action:"rbtgetcompany",ucode:localStorage.getItem("UCODE")};this.postPvd.postData(t,localStorage.getItem("HOMELINK")).subscribe(e=>{"ok"==e.stats?(this.companies=e.datax,console.log(e)):this.openToaste("<center>Error occured!</center>")})})}optionsFn(){if(this.company)return console.log("x1"),new Promise(e=>{let t={action:"rbtgetvisor",ucode:localStorage.getItem("UCODE"),code:this.company};this.postPvd.postData(t,localStorage.getItem("HOMELINK")).subscribe(e=>{"ok"==e.stat?this.supervisors=e.visor:this.openToaste("Error on fetching details.")})})}timeChange(){if(this.st&&this.et)return console.log("x2"),new Promise(e=>{let t={action:"rbtvalidatetime",supervisor:this.supervisor,cdates:$("#fd").val(),cdatee:$("#td").val(),start:this.st,end:this.et};this.postPvd.postData(t,localStorage.getItem("HOMELINK")).subscribe(e=>{"ok"==e.stats?(console.log(e),0==e.count?$("#save").css("display",""):($("#save").css("display","none"),this.openToaste("The supervisor that you choose already have appointment on the selected time and day."))):this.openToaste("Error occured!")})})}save(){var e=0;if($(".req").each(function(){""==$(this).val()&&e++}),0==e)return this.ptname=this.plt.is("ios")?"ios":this.plt.is("android")?"android":"APP",new Promise(e=>{let t={action:"rbtsaveown",ucode:localStorage.getItem("UCODE"),ccomp:this.company,csup:this.supervisor,cdates:$("#fd").val(),cdatee:$("#td").val(),cstime:this.st,cetime:this.et,cnote:$("#note").val(),plt:this.ptname};this.postPvd.postData(t,localStorage.getItem("HOMELINK")).subscribe(e=>{"ok"==e.stats?(this.show=!1,$("#save").css("display","none"),this.openToasts("Work schedule has been created!"),this.supervisors=[],$("ion-datetime").val(""),$("ion-textarea").val(""),this.supervisor="",this.company=""):this.openToaste("Error occured!")})});this.openToaste("<center>All fields are required!</center>")}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(a.F0),l.Y36(c.B),l.Y36(s.yF),l.Y36(s._q),l.Y36(s.Br),l.Y36(s.t4),l.Y36(n.Ye))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-work-schedule-create"]],decls:41,vars:12,consts:[["slot","start"],["autoHide","false"],["position","floating"],[3,"ngModel","ngModelChange","ionChange"],["class","req",3,"value",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],["id","fd","placeholder","Select Date","display-format","YYYY-MM-DD",1,"req",3,"max"],["id","td","placeholder","Select Date","display-format","YYYY-MM-DD",1,"req",3,"max"],["display-format","h:mm A","picker-format","h:mm A","placeholder","00:00",1,"req",3,"ngModel","ngModelOptions","ngModelChange","ionChange"],["id","note","placeholder","Note",1,"req"],["expand","block","color","secondary","size","small","id","save",2,"display","none",3,"click"],[1,"req",3,"value"]],template:function(e,t){1&e&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar"),l.TgZ(2,"ion-buttons",0),l._UZ(3,"ion-menu-button",1),l.qZA(),l.qZA(),l.qZA(),l.TgZ(4,"ion-content"),l.TgZ(5,"ion-list"),l.TgZ(6,"ion-list-header"),l.TgZ(7,"ion-label"),l._uU(8,"Work Schedule"),l.qZA(),l.qZA(),l.TgZ(9,"ion-item"),l.TgZ(10,"ion-label",2),l._uU(11,"Select Company: "),l.qZA(),l.TgZ(12,"ion-select",3),l.NdJ("ngModelChange",function(e){return t.company=e})("ionChange",function(){return t.optionsFn()}),l.YNc(13,d,2,2,"ion-select-option",4),l.qZA(),l.qZA(),l.TgZ(14,"ion-item"),l.TgZ(15,"ion-label",2),l._uU(16,"Select Supervisor: "),l.qZA(),l.TgZ(17,"ion-select",5),l.NdJ("ngModelChange",function(e){return t.supervisor=e}),l.YNc(18,g,2,2,"ion-select-option",4),l.qZA(),l.qZA(),l.TgZ(19,"ion-item"),l.TgZ(20,"ion-label",2),l._uU(21,"From Date: "),l.qZA(),l._UZ(22,"ion-datetime",6),l.qZA(),l.TgZ(23,"ion-item"),l.TgZ(24,"ion-label",2),l._uU(25,"To Date: "),l.qZA(),l._UZ(26,"ion-datetime",7),l.qZA(),l.TgZ(27,"ion-item"),l.TgZ(28,"ion-label",2),l._uU(29,"Start Time: "),l.qZA(),l.TgZ(30,"ion-datetime",8),l.NdJ("ngModelChange",function(e){return t.st=e})("ionChange",function(){return t.timeChange()}),l.qZA(),l.qZA(),l.TgZ(31,"ion-item"),l.TgZ(32,"ion-label",2),l._uU(33,"End Time: "),l.qZA(),l.TgZ(34,"ion-datetime",8),l.NdJ("ngModelChange",function(e){return t.et=e})("ionChange",function(){return t.timeChange()}),l.qZA(),l.qZA(),l.TgZ(35,"ion-item"),l.TgZ(36,"ion-label",2),l._uU(37,"Note: "),l.qZA(),l._UZ(38,"ion-textarea",9),l.qZA(),l.TgZ(39,"ion-button",10),l.NdJ("click",function(){return t.save()}),l._uU(40,"Save"),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(12),l.Q6J("ngModel",t.company),l.xp6(1),l.Q6J("ngForOf",t.companies),l.xp6(4),l.Q6J("ngModel",t.supervisor),l.xp6(1),l.Q6J("ngForOf",t.supervisors),l.xp6(4),l.s9C("max",t.maxyr),l.xp6(4),l.s9C("max",t.maxyr),l.xp6(4),l.Q6J("ngModel",t.st)("ngModelOptions",l.DdM(10,p)),l.xp6(4),l.Q6J("ngModel",t.et)("ngModelOptions",l.DdM(11,p)))},directives:[s.Gu,s.sr,s.Sm,s.fG,s.W2,s.q_,s.yh,s.Q$,s.Ie,s.t9,s.QI,i.JJ,i.On,n.sg,s.x4,s.g2,s.j9,s.YG,s.n0],styles:["ion-list-header[_ngcontent-%COMP%]{color:#202945;font-weight:500;font-family:Poetsen One;font-size:larger;text-align:center;margin-left:-10px!important}ion-button[_ngcontent-%COMP%]{text-transform:none;font-family:Poetsen One}ion-col[_ngcontent-%COMP%], ion-col[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{font-size:12px;text-align:justify}.head[_ngcontent-%COMP%]{font-weight:400;font-size:13px}.head[_ngcontent-%COMP%], .header-r[_ngcontent-%COMP%]{text-align:center;font-family:Poetsen One}.header-r[_ngcontent-%COMP%]{font-size:14px;background-color:#ffb444}.header-r[_ngcontent-%COMP%], .header-r1[_ngcontent-%COMP%]{border:1px solid #000}.header-r1[_ngcontent-%COMP%]{border-top:0!important}ion-item[_ngcontent-%COMP%]{font-size:12px;--min-height:10px}"]}),e})()}];let h=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[a.Bz.forChild(u)],a.Bz]}),e})(),m=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[n.ez,i.u5,s.Pc,h]]}),e})()}}]);