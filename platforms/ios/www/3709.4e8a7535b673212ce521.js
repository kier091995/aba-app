(self.webpackChunkrbt_1=self.webpackChunkrbt_1||[]).push([[3709],{3709:(o,e,t)=>{"use strict";t.d(e,{G:()=>d});var n=t(1855),i=t(3606),r=t(3991),s=t(427),a=t(4683),l=t(6274),c=t(4988);const Z=function(){return{standalone:!0}};function u(o,e){if(1&o){const o=i.EpF();i.TgZ(0,"form",6),i.NdJ("ngSubmit",function(){return i.CHM(o),i.oxw().confirm()}),i.TgZ(1,"ion-grid"),i.TgZ(2,"ion-row"),i.TgZ(3,"ion-col",7),i._uU(4,"Supervision Type"),i.qZA(),i.qZA(),i.TgZ(5,"ion-row"),i.TgZ(6,"ion-col",8),i.TgZ(7,"select",9),i._UZ(8,"option"),i.TgZ(9,"option"),i._uU(10,"Individual"),i.qZA(),i.TgZ(11,"option"),i._uU(12,"Group"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(13,"ion-row"),i.TgZ(14,"ion-col",10),i._uU(15,"RBT"),i.qZA(),i.TgZ(16,"ion-col",11),i._uU(17,"Company"),i.qZA(),i.qZA(),i.TgZ(18,"ion-row"),i.TgZ(19,"ion-col",12),i._uU(20),i.qZA(),i.TgZ(21,"ion-col",13),i._uU(22),i.qZA(),i.qZA(),i.qZA(),i.TgZ(23,"ion-grid"),i.TgZ(24,"ion-row"),i.TgZ(25,"ion-col",14),i._uU(26,"Date"),i.qZA(),i.TgZ(27,"ion-col",15),i._uU(28,"Start Time"),i.qZA(),i.TgZ(29,"ion-col",15),i._uU(30,"End Time"),i.qZA(),i.TgZ(31,"ion-col",16),i._uU(32,"Hours"),i.qZA(),i.qZA(),i.TgZ(33,"ion-row"),i.TgZ(34,"ion-col",17),i._uU(35),i.qZA(),i._UZ(36,"ion-col",18),i._UZ(37,"ion-col",19),i._UZ(38,"ion-col",20),i.qZA(),i.TgZ(39,"ion-row"),i.TgZ(40,"ion-col",10),i._uU(41,"Unrestricted Hours"),i.qZA(),i.TgZ(42,"ion-col",11),i._uU(43,"Restricted Hours"),i.qZA(),i.qZA(),i.TgZ(44,"ion-row"),i.TgZ(45,"ion-col",12),i.TgZ(46,"input",21),i.NdJ("keyup",function(){return i.CHM(o),i.oxw().unrestrict()}),i.qZA(),i.qZA(),i._UZ(47,"input",22),i._UZ(48,"ion-col",23),i.qZA(),i.qZA(),i.TgZ(49,"ion-grid"),i.TgZ(50,"ion-row"),i.TgZ(51,"ion-col",7),i._uU(52,"Method of Supervision"),i.qZA(),i.qZA(),i.TgZ(53,"ion-row"),i.TgZ(54,"ion-col",8),i.TgZ(55,"select",24),i._UZ(56,"option"),i.TgZ(57,"option"),i._uU(58,"No Supervision Session"),i.qZA(),i.TgZ(59,"option"),i._uU(60,"Face-to-face"),i.qZA(),i.TgZ(61,"option"),i._uU(62,"Video Conferencing"),i.qZA(),i.TgZ(63,"option"),i._uU(64,"Telephone"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(65,"ion-row"),i.TgZ(66,"ion-col",25),i._uU(67,"Supervision Start Time"),i.qZA(),i.TgZ(68,"ion-col",25),i._uU(69,"Supervision End Time"),i.qZA(),i.TgZ(70,"ion-col",26),i._uU(71,"Total Supervision Hours"),i.qZA(),i.qZA(),i.TgZ(72,"ion-row"),i.TgZ(73,"ion-col",27),i.TgZ(74,"ion-datetime",28),i.NdJ("ngModelChange",function(e){return i.CHM(o),i.oxw().sups=e})("ionChange",function(){return i.CHM(o),i.oxw().suptime()}),i.qZA(),i.qZA(),i.TgZ(75,"ion-col",27),i.TgZ(76,"ion-datetime",28),i.NdJ("ngModelChange",function(e){return i.CHM(o),i.oxw().supe=e})("ionChange",function(){return i.CHM(o),i.oxw().suptime()}),i.qZA(),i.qZA(),i.TgZ(77,"ion-col",29),i._uU(78,"0"),i.qZA(),i.qZA(),i.TgZ(79,"ion-row"),i.TgZ(80,"ion-col",7),i._uU(81,"Client Observation"),i.qZA(),i.qZA(),i.TgZ(82,"ion-row"),i.TgZ(83,"ion-col",8),i.TgZ(84,"select",30),i._UZ(85,"option"),i.TgZ(86,"option"),i._uU(87,"Yes"),i.qZA(),i.TgZ(88,"option"),i._uU(89,"No"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(90,"ion-row"),i.TgZ(91,"ion-col",7),i._uU(92,"Note"),i.qZA(),i.qZA(),i.TgZ(93,"ion-row"),i.TgZ(94,"ion-col",31),i._UZ(95,"textarea",32),i.qZA(),i.qZA(),i.qZA(),i.TgZ(96,"ion-button",33),i._uU(97,"Save"),i.qZA(),i.qZA()}if(2&o){const o=i.oxw();i.xp6(20),i.Oqu(o.rbt),i.xp6(2),i.Oqu(o.company),i.xp6(13),i.Oqu(o.date),i.xp6(39),i.Q6J("ngModel",o.sups)("ngModelOptions",i.DdM(7,Z)),i.xp6(2),i.Q6J("ngModel",o.supe)("ngModelOptions",i.DdM(8,Z))}}function g(o,e){if(1&o&&(i.TgZ(0,"ion-grid"),i.TgZ(1,"ion-row"),i.TgZ(2,"ion-col",7),i._uU(3,"Supervision Type"),i.qZA(),i.qZA(),i.TgZ(4,"ion-row"),i.TgZ(5,"ion-col",8),i._uU(6),i.qZA(),i.qZA(),i.TgZ(7,"ion-row"),i.TgZ(8,"ion-col",10),i._uU(9,"RBT"),i.qZA(),i.TgZ(10,"ion-col",11),i._uU(11,"Company"),i.qZA(),i.qZA(),i.TgZ(12,"ion-row"),i.TgZ(13,"ion-col",12),i._uU(14),i.qZA(),i.TgZ(15,"ion-col",13),i._uU(16),i.qZA(),i.qZA(),i.qZA(),i.TgZ(17,"ion-grid"),i.TgZ(18,"ion-row"),i.TgZ(19,"ion-col",14),i._uU(20,"Date"),i.qZA(),i.TgZ(21,"ion-col",15),i._uU(22,"Start Time"),i.qZA(),i.TgZ(23,"ion-col",15),i._uU(24,"End Time"),i.qZA(),i.TgZ(25,"ion-col",16),i._uU(26,"Hours"),i.qZA(),i.qZA(),i.TgZ(27,"ion-row"),i.TgZ(28,"ion-col",17),i._uU(29),i.qZA(),i.TgZ(30,"ion-col",18),i._uU(31),i.qZA(),i.TgZ(32,"ion-col",19),i._uU(33),i.qZA(),i.TgZ(34,"ion-col",34),i._uU(35),i.qZA(),i.qZA(),i.TgZ(36,"ion-row"),i.TgZ(37,"ion-col",10),i._uU(38,"Unrestricted Hours"),i.qZA(),i.TgZ(39,"ion-col",11),i._uU(40,"Restricted Hours"),i.qZA(),i.qZA(),i.TgZ(41,"ion-row"),i.TgZ(42,"ion-col",12),i._uU(43),i.qZA(),i._UZ(44,"ion-col",35),i.qZA(),i.qZA(),i.TgZ(45,"ion-grid"),i.TgZ(46,"ion-row"),i.TgZ(47,"ion-col",7),i._uU(48,"Method of Supervision"),i.qZA(),i.qZA(),i.TgZ(49,"ion-row"),i.TgZ(50,"ion-col",8),i._uU(51),i.qZA(),i.qZA(),i.TgZ(52,"ion-row"),i.TgZ(53,"ion-col",25),i._uU(54,"Supervision Start Time"),i.qZA(),i.TgZ(55,"ion-col",25),i._uU(56,"Supervision End Time"),i.qZA(),i.TgZ(57,"ion-col",26),i._uU(58,"Total Supervision Hours"),i.qZA(),i.qZA(),i.TgZ(59,"ion-row"),i.TgZ(60,"ion-col",27),i._uU(61),i.qZA(),i.TgZ(62,"ion-col",27),i._uU(63),i.qZA(),i.TgZ(64,"ion-col",29),i._uU(65),i.qZA(),i.qZA(),i.TgZ(66,"ion-row"),i.TgZ(67,"ion-col",7),i._uU(68,"Client Observation"),i.qZA(),i.qZA(),i.TgZ(69,"ion-row"),i.TgZ(70,"ion-col",8),i._uU(71),i.qZA(),i.qZA(),i.TgZ(72,"ion-row"),i.TgZ(73,"ion-col",7),i._uU(74,"Note"),i.qZA(),i.qZA(),i.TgZ(75,"ion-row"),i.TgZ(76,"ion-col",31),i._uU(77),i.qZA(),i.qZA(),i.qZA()),2&o){const o=i.oxw();i.xp6(6),i.Oqu(o.visor.supertype),i.xp6(8),i.Oqu(o.rbt),i.xp6(2),i.Oqu(o.company),i.xp6(13),i.Oqu(o.date),i.xp6(2),i.Oqu(o.own.stime),i.xp6(2),i.Oqu(o.own.etime),i.xp6(2),i.Oqu(o.own.hours),i.xp6(8),i.hij(" ",o.visor.unrestricted," "),i.xp6(8),i.Oqu(o.visor.method),i.xp6(10),i.Oqu(o.visor.supertimes),i.xp6(2),i.Oqu(o.visor.supertimee),i.xp6(2),i.Oqu(o.visor.total),i.xp6(6),i.Oqu(o.visor.observation),i.xp6(6),i.Oqu(o.visor.note)}}let d=(()=>{class o{constructor(o,e,t,n,i,r,s,a){this.router=o,this.postPvd=e,this.toastController=t,this.menuCtrl=n,this.modalController=i,this.actionSheetController=r,this.alertController=s,this.plt=a}ngOnInit(){"create"==this.type?this.getData():this.fetch()}backButton(){this.modalController.dismiss({dismissed:!0})}openToasts(o){return(0,n.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"<center>"+o+"</center>",duration:2e3,color:"success"})).present()})}openToaste(o){return(0,n.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"<center>"+o+"</center>",duration:2e3,color:"danger"})).present()})}doRefresh(o){setTimeout(()=>{this.getData(),o.target.complete()},2e3)}getData(){if(this.code)return new Promise(o=>{let e={action:"getsupervisorlog",ucode:localStorage.getItem("UCODE"),code:this.code};this.postPvd.postData(e,localStorage.getItem("HOMELINK")).subscribe(o=>{if("ok"==o.status){this.company=o.company,this.rbt=o.rbt,this.date=o.date,this.logcode=o.datax.newcode;var e=o.datax.etime,t=o.datax.stime.split(":"),n=e.split(":"),i=parseInt(t[0])-parseInt(n[0]),r=parseInt(t[1])-parseInt(n[1]),s=Math.abs(i)+"."+Math.abs(r);$("#hours").html(s),$("#total").html(s),$("#totalx").val(s),$("#stime").html(o.datax.stime),$("#etime").html(o.datax.etime)}else this.openToaste("Error occured!")})})}unrestrict(){var o=Number($("#totalx").val()),e=Number($("#unr").val()),t=String(Math.abs(o-e));$("#total").html(t)}suptime(){if(null!=this.supe&&null!=this.sups&&""!=this.supe&&""!=this.sups){var o=this.sups.split("T"),e=this.supe.split("T"),t=o[1].split(":"),n=e[1].split(":"),i=parseInt(t[0])-parseInt(n[0]),r=parseInt(t[1])-parseInt(n[1]),s=Math.abs(i)+"."+Math.abs(r);console.log(n,t),$("#totalsup").html(s)}}confirm(){return(0,n.mG)(this,void 0,void 0,function*(){const o=yield this.alertController.create({cssClass:"my-custom-class",message:"By creating this log means you sign this document?",buttons:[{text:"No",role:"cancel",cssClass:"alertConfirm",handler:o=>{}},{text:"Yes",cssClass:"alertConfirm",handler:()=>{this.save()}}]});yield o.present()})}save(){var o=0,e=[];if($(".req").each(function(){""==$(this).val()&&(e.push($(this)),o++)}),0==o)return this.ptname=this.plt.is("ios")?"ios":this.plt.is("android")?"android":"APP",new Promise(o=>{let e={action:"savesupervisorlog",ucode:localStorage.getItem("UCODE"),ptname:this.ptname,workcode:this.logcode,type:$("#stype").val(),unrestricted:$("#unr").val(),method:$("#ms").val(),superstime:this.sups,supertimee:this.supe,total:$("#totalsup").html(),observation:$("#co").val(),note:$("#note").val(),tx:$("#hours").html(),total1:$("#total").html()};this.postPvd.postData(e,localStorage.getItem("HOMELINK")).subscribe(o=>{"ok"==o.status?(this.openToasts("The log has been created."),this.backButton()):this.openToaste("Error occured!")})});this.openToaste("This fields are required!"),e[0].focus(),e[0].css("border","1px solid red"),setTimeout(function(){e[0].removeAttr("style")},5e3)}fetch(){if(this.code)return new Promise(o=>{let e={action:"displaysupervisorlog",ucode:localStorage.getItem("UCODE"),code:this.code};this.postPvd.postData(e,localStorage.getItem("HOMELINK")).subscribe(o=>{if("ok"==o.status){this.company=o.company,this.rbt=o.rbt,this.date=o.date,this.own=o.datax,this.visor=o.visor,this.logcode=o.datax.newcode;var e=o.datax.etime,t=o.datax.stime.split(":"),n=e.split(":"),i=parseInt(t[0])-parseInt(n[0]),r=parseInt(t[1])-parseInt(n[1]),s=Math.abs(i)+"."+Math.abs(r);$("#hoursv").html(s),$("#totalv").html(s)}else this.openToaste("Error occured!")})})}}return o.\u0275fac=function(e){return new(e||o)(i.Y36(r.F0),i.Y36(s.B),i.Y36(a.yF),i.Y36(a._q),i.Y36(a.IN),i.Y36(a.BX),i.Y36(a.Br),i.Y36(a.t4))},o.\u0275cmp=i.Xpm({type:o,selectors:[["app-supervisorlog"]],inputs:{code:"code",type:"type"},decls:17,vars:2,consts:[["slot","start"],[3,"click"],["name","chevron-back-outline",1,"return"],["slot","fixed",3,"ionRefresh"],[3,"ngSubmit",4,"ngIf","ngIfElse"],["thisElse",""],[3,"ngSubmit"],["size","12",1,"headeruna"],["size","12",1,"headeruna1"],["id","stype",1,"req"],["size","6",1,"header-r"],["size","6",1,"header"],["size","6",1,"header-r12"],["size","6",1,"header12"],["size","4",1,"header-r"],["size","3",1,"header-r"],["size","2",1,"header"],["size","4",1,"header-r1"],["size","3","id","stime",1,"header-r1"],["size","3","id","etime",1,"header-r1"],["size","2","id","hours",1,"header1"],["type","number","id","unr",3,"keyup"],["type","hidden","id","totalx"],["size","6","id","total",1,"header12"],["id","ms",1,"req"],["size","4",1,"headerth"],["size","4",1,"headerthx"],["size","4",1,"headerxx"],["display-format","h:mm A","picker-format","h:mm A","placeholder","00:00",3,"ngModel","ngModelOptions","ngModelChange","ionChange"],["size","4","id","totalsup",1,"headerxxx"],["id","co"],["size","12",1,"headeruna1x"],["id","note","cols","20","rows","10"],["button","","color","secondary","expand","block","type","submit"],["size","2","id","hoursv",1,"header1"],["size","6","id","totalv",1,"header12"]],template:function(o,e){if(1&o&&(i.TgZ(0,"ion-header"),i.TgZ(1,"ion-toolbar"),i.TgZ(2,"ion-buttons",0),i.TgZ(3,"ion-button",1),i.NdJ("click",function(){return e.backButton()}),i._UZ(4,"ion-icon",2),i.TgZ(5,"ion-label"),i._uU(6,"Back"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(7,"ion-content"),i.TgZ(8,"ion-refresher",3),i.NdJ("ionRefresh",function(o){return e.doRefresh(o)}),i._UZ(9,"ion-refresher-content"),i.qZA(),i.TgZ(10,"ion-list"),i.TgZ(11,"ion-list-header"),i.TgZ(12,"ion-label"),i._uU(13,"Supervisor Log"),i.qZA(),i.qZA(),i.qZA(),i.YNc(14,u,98,9,"form",4),i.YNc(15,g,78,14,"ng-template",null,5,i.W1O),i.qZA()),2&o){const o=i.MAs(16);i.xp6(14),i.Q6J("ngIf","create"==e.type)("ngIfElse",o)}},directives:[a.Gu,a.sr,a.Sm,a.YG,a.gu,a.Q$,a.W2,a.nJ,a.Wo,a.q_,a.yh,l.O5,c._Y,c.JL,c.F,a.jY,a.Nd,a.wI,c.YN,c.Kr,a.x4,a.QI,c.JJ,c.On],styles:["@font-face{font-family:Poetsen One;font-style:normal;font-weight:300;font-display:swap;src:url(/assets/fonts/PoetsenOne-Regular.ttf)}ion-list-header[_ngcontent-%COMP%]{color:#202945;font-weight:500;font-family:Poetsen One;font-size:larger;text-align:center;margin-left:-10px!important}ion-button[_ngcontent-%COMP%]{text-transform:none;font-family:Poetsen One}ion-item[_ngcontent-%COMP%]{font-size:11px}.header[_ngcontent-%COMP%], .headerx[_ngcontent-%COMP%]{border:1px solid #000;font-size:11px;text-align:center;background-color:#ffb444;font-family:Poetsen One}.headerx[_ngcontent-%COMP%]{border-left:0!important}.headeruna[_ngcontent-%COMP%], .headerunax[_ngcontent-%COMP%]{border:1px solid #000;font-size:11px;text-align:center;background-color:#ffb444;font-family:Poetsen One}.headerunax[_ngcontent-%COMP%]{border-top:0}.headeruna1[_ngcontent-%COMP%]{border:1px solid #000;border-top:0;border-bottom:0}.headeruna1[_ngcontent-%COMP%], .headeruna1x[_ngcontent-%COMP%]{font-size:11px;text-align:center}.headeruna1x[_ngcontent-%COMP%]{border:1px solid #000;border-top:0}.header-r[_ngcontent-%COMP%]{border:1px solid #000;border-right:0!important;background-color:#ffb444;font-family:Poetsen One}.header1[_ngcontent-%COMP%], .header-r[_ngcontent-%COMP%]{font-size:11px;text-align:center}.header1[_ngcontent-%COMP%]{border-left:1px solid #000;border-right:1px solid #000}.header-r1[_ngcontent-%COMP%]{border-left:1px solid #000}.header12[_ngcontent-%COMP%], .header-r1[_ngcontent-%COMP%]{font-size:11px;text-align:center}.header12[_ngcontent-%COMP%], .header12x[_ngcontent-%COMP%]{border:1px solid #000;border-top:0!important}.header12x[_ngcontent-%COMP%]{border-left:0!important}.header12x[_ngcontent-%COMP%], .header-r12[_ngcontent-%COMP%]{font-size:11px;text-align:center}.header-r12[_ngcontent-%COMP%]{border-left:1px solid #000;border-bottom:1px solid #000}.headerth[_ngcontent-%COMP%]{border:1px solid #000;border-right:0!important}.headerth[_ngcontent-%COMP%], .headerthx[_ngcontent-%COMP%]{font-size:11px;text-align:center;background-color:#ffb444;font-family:Poetsen One}.headerthx[_ngcontent-%COMP%]{border:1px solid #000}.headerxx[_ngcontent-%COMP%], .headerxxx[_ngcontent-%COMP%]{border-left:1px solid #000;font-size:11px;text-align:center}.headerxxx[_ngcontent-%COMP%]{border-right:1px solid #000}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;background-color:#fff;border-radius:5px}ion-datetime[_ngcontent-%COMP%]{border-bottom:1px solid #000}"]}),o})()}}]);