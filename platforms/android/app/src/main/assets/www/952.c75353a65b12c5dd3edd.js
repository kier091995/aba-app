(self.webpackChunkrbt_1=self.webpackChunkrbt_1||[]).push([[952],{952:(t,e,o)=>{"use strict";o.r(e),o.d(e,{ProfilePageModule:()=>T});var n=o(6274),i=o(4988),r=o(4683),a=o(3991),s=o(1855),c=o(3606),l=o(427),u=o(721);function p(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"ion-button",23),c.NdJ("click",function(){return c.CHM(t),c.oxw().createCompany()}),c._uU(2,"Create Company"),c.qZA(),c.TgZ(3,"ion-button",9),c.NdJ("click",function(){return c.CHM(t),c.oxw().createVisor()}),c._uU(4,"Create Supervisor"),c.qZA(),c.TgZ(5,"ion-button",9),c.NdJ("click",function(){return c.CHM(t),c.oxw().attachSuper()}),c._uU(6,"Attach a Supervisor"),c.qZA(),c.qZA()}}function d(t,e){if(1&t&&(c.TgZ(0,"div"),c.TgZ(1,"ion-item"),c.TgZ(2,"ion-label",19),c._uU(3,"Certification No:"),c.qZA(),c._UZ(4,"ion-input",20),c.qZA(),c.TgZ(5,"ion-item"),c.TgZ(6,"ion-label",19),c._uU(7,"Qualification:"),c.qZA(),c._UZ(8,"ion-input",20),c.qZA(),c.TgZ(9,"ion-item"),c.TgZ(10,"ion-label",19),c._uU(11,"Date Qualified to Supervise:"),c.qZA(),c._UZ(12,"ion-input",20),c.qZA(),c.TgZ(13,"ion-item"),c.TgZ(14,"ion-label",19),c._uU(15,"Date Supervision Contract:"),c.qZA(),c._UZ(16,"ion-input",20),c.qZA(),c.qZA()),2&t){const t=c.oxw();c.xp6(4),c.s9C("value",t.cert),c.xp6(4),c.s9C("value",t.quali),c.xp6(4),c.s9C("value",t.dquali),c.xp6(4),c.s9C("value",t.dsuper)}}function g(t,e){1&t&&(c.TgZ(0,"div"),c.TgZ(1,"ion-item",14),c._UZ(2,"ion-icon",24),c.TgZ(3,"ion-label",16),c._uU(4,"No data available.."),c.qZA(),c.qZA(),c.qZA())}function m(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-icon",28),c.NdJ("click",function(){c.CHM(t);const e=c.oxw().index,o=c.oxw(2);return o.presentRemove(o.companycodes[e])}),c.qZA()}}function h(t,e){if(1&t&&(c.TgZ(0,"div"),c.TgZ(1,"ion-item",14),c.YNc(2,m,1,0,"ion-icon",26),c.TgZ(3,"ion-label",16),c._UZ(4,"ion-icon",27),c._uU(5),c.qZA(),c.qZA(),c.qZA()),2&t){const t=e.index,o=c.oxw(2);c.xp6(2),c.Q6J("ngIf","RBT"==o.utype),c.xp6(3),c.Oqu(o.companies[t])}}function Z(t,e){if(1&t&&c.YNc(0,h,6,2,"div",25),2&t){const t=c.oxw();c.Q6J("ngForOf",t.companies)}}function f(t,e){1&t&&(c.TgZ(0,"div"),c.TgZ(1,"ion-item",14),c._UZ(2,"ion-icon",24),c.TgZ(3,"ion-label",16),c._uU(4,"No data available.."),c.qZA(),c.qZA(),c.qZA())}function v(t,e){if(1&t&&(c.TgZ(0,"div"),c.TgZ(1,"ion-item",14),c._UZ(2,"ion-icon",30),c.TgZ(3,"ion-label",16),c._uU(4),c.qZA(),c.qZA(),c.qZA()),2&t){const t=e.index,o=c.oxw(3);c.xp6(4),c.Oqu(o.supervisors[t])}}function C(t,e){if(1&t&&c.YNc(0,v,5,1,"div",25),2&t){const t=c.oxw(2);c.Q6J("ngForOf",t.supervisors)}}function b(t,e){if(1&t&&(c.TgZ(0,"ion-card"),c.TgZ(1,"ion-list"),c.TgZ(2,"ion-list-header"),c.TgZ(3,"ion-label"),c._uU(4,"Attached Supervisors"),c.qZA(),c.qZA(),c.YNc(5,f,5,0,"div",21),c.YNc(6,C,1,1,"ng-template",null,29,c.W1O),c.qZA(),c.qZA()),2&t){const t=c.MAs(7),e=c.oxw();c.xp6(5),c.Q6J("ngIf",0==e.suplng)("ngIfElse",t)}}const y=[{path:"",component:(()=>{class t{constructor(t,e,o,n,i,r){this.router=t,this.postPvd=e,this.toastController=o,this.menuCtrl=n,this.alertController=i,this.someComponent=r}ngOnInit(){}ionViewDidEnter(){this.menuCtrl.enable(!0),this.stype="Supervisors"==localStorage.getItem("UTYPE")?localStorage.getItem("SUB"):"RBT"}ionViewWillEnter(){this.utype=localStorage.getItem("UTYPE"),this.menuCtrl.enable(!0),this.fetchDetails(),this.fetchCompany(),this.fetchSupervisors(),this.someComponent.theFunction(),this.checkData()}fetchDetails(){return new Promise(t=>{let e={action:"fetchDetails",ucode:localStorage.getItem("UCODE")};this.postPvd.postData(e,localStorage.getItem("HOMELINK")).subscribe(t=>{"success"==t.status?(this.email=t.email,this.contact=t.contact,this.address=t.address,this.address1=t.address1,this.city=t.city,this.state=t.state,this.zipcode=t.zipcode,this.supid=t.supid,this.cert=t.cert,this.certdate=t.certdate,this.recertdate=t.recertdate,this.quali=t.quali,this.dquali=t.dquali,this.dsuper=t.dsuper,this.name=t.name,this.type=t.categoryName):this.openToaste("<center>Error Occured!</center>")})})}fetchCompany(){return new Promise(t=>{let e={action:"fetchCompanyNew",ucode:localStorage.getItem("UCODE"),utype:localStorage.getItem("UTYPE")};this.postPvd.postData(e,localStorage.getItem("HOMELINK")).subscribe(t=>{"success"==t.status?(this.companies=t.companies,this.companycodes=t.companycode,this.comlng=this.companies.length,8==t.count&&$("#btncompany").hide()):this.openToaste("<center>Error Occured!</center>")})})}fetchSupervisors(){return new Promise(t=>{let e={action:"fetchSupervisors",ucode:localStorage.getItem("UCODE")};this.postPvd.postData(e,localStorage.getItem("HOMELINK")).subscribe(t=>{"success"==t.status?(this.supervisors=t.supervisors,this.suplng=this.supervisors.length):this.openToaste("<center>Error Occured!</center>")})})}openToasts(t){return(0,s.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:t,duration:2e3,color:"success"})).present()})}openToaste(t){return(0,s.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:t,duration:2e3,color:"danger"})).present()})}editProfile(){this.router.navigateByUrl("/profile-edit")}createCompany(){this.router.navigateByUrl("/create-company")}createVisor(){this.router.navigateByUrl("/create-supervisors")}updatePass(){this.router.navigateByUrl("/update-password")}attachCompany(){this.router.navigateByUrl("/attach-company")}attachSuper(){this.router.navigateByUrl("/attach-supervisor")}doRefresh(t){setTimeout(()=>{this.fetchDetails(),this.fetchCompany(),this.fetchSupervisors(),t.target.complete()},2e3)}checkData(){if("RBT"==localStorage.getItem("UTYPE"))return new Promise(t=>{let e={action:"NEWrbtValidation",ucode:localStorage.getItem("UCODE")};this.postPvd.postData(e,localStorage.getItem("HOMELINK")).subscribe(t=>{"ok"==t.status&&this.presentAlertConfirm(t.msg,t.module,t.work)})})}presentAlertConfirm(t,e,o){return(0,s.mG)(this,void 0,void 0,function*(){const o=yield this.alertController.create({header:"Attention!",backdropDismiss:!1,message:'<p style="text-align: justify;">'+t+"</p>",cssClass:"foo",buttons:[{text:"Go",handler:()=>{"Company"==e&&this.chooseCreateCompany(),"Supervisor"==e&&this.chooseCreateSupervisor(),"Worksched"==e&&this.router.navigate(["/work-schedule-create"])}}]});yield o.present()})}chooseCreateCompany(){return(0,s.mG)(this,void 0,void 0,function*(){const t=yield this.alertController.create({header:"Attention!",backdropDismiss:!1,message:'<p style="text-align: justify;">Please choose whether to <b>create</b> or <b>attach</b> a company </p>',cssClass:"foo",buttons:[{text:"Create",handler:()=>{this.createCompany()}},{text:"Attach",handler:()=>{this.attachCompany()}}]});yield t.present()})}chooseCreateSupervisor(){return(0,s.mG)(this,void 0,void 0,function*(){const t=yield this.alertController.create({header:"Attention!",backdropDismiss:!1,message:'<p style="text-align: justify;">Please choose whether to <b>create</b> or <b>attach</b> a supervisor </p>',cssClass:"foo",buttons:[{text:"Create",handler:()=>{this.createVisor()}},{text:"Attach",handler:()=>{this.attachSuper()}}]});yield t.present()})}presentRemove(t){return(0,s.mG)(this,void 0,void 0,function*(){console.log(t);const e=yield this.alertController.create({header:"Attention!",backdropDismiss:!1,message:'<p style="text-align: justify;">Are you sure you want to remove this company?</p>',cssClass:"foo",buttons:[{text:"Yes",handler:()=>new Promise(e=>{let o={action:"RBTremoveCompany",ucode:localStorage.getItem("UCODE"),code:t};this.postPvd.postData(o,localStorage.getItem("HOMELINK")).subscribe(t=>{"ok"==t.status?(this.openToasts("<center>Company has been removed!</center>"),this.fetchCompany()):this.openToaste("<center>Error Occured!</center>")})})},{text:"No",role:"cancel",handler:t=>{}}]});yield e.present()})}signature(){this.router.navigateByUrl("/signature-upload")}deleteacc(){return(0,s.mG)(this,void 0,void 0,function*(){const t=yield this.alertController.create({header:"Attention!",backdropDismiss:!1,message:'<p style="text-align: justify;"> Are you sure you want to delete your account? </p>',cssClass:"foo",buttons:[{text:"Confirm",handler:()=>new Promise(t=>{let e={action:"DeactivateAccount",ucode:localStorage.getItem("UCODE")};this.postPvd.postData(e,localStorage.getItem("HOMELINK")).subscribe(t=>{"ok"==t.status&&(this.openToasts("Account has been deleted!!!"),this.type="",localStorage.clear(),this.router.navigate(["/login"]))})})},{text:"Cancel",role:"cancel"}]});yield t.present()})}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(a.F0),c.Y36(l.B),c.Y36(r.yF),c.Y36(r._q),c.Y36(r.Br),c.Y36(u.y))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-profile"]],decls:76,vars:18,consts:[["slot","start"],["autoHide","false"],[1,"padtop"],["slot","fixed",3,"ionRefresh"],[1,"divimg"],["src","assets/profilelogo.png",1,"imgprofile"],[1,"divname"],[1,"name"],[1,"divbtns"],["size","small","color","primary",3,"click"],[4,"ngIf"],[1,"details"],[3,"click"],["color","secondary","name","create-outline"],[1,"ion-no-padding"],["name","at-outline"],[1,"ion-text-wrap"],["name","call-outline"],["name","home-outline",1,"topicon"],["position","stacked"],["readonly","",3,"value"],[4,"ngIf","ngIfElse"],["conditionCompFalse",""],["size","small","color","primary","id","btncompany",3,"click"],["name","alert-circle-outline"],[4,"ngFor","ngForOf"],["button","","color","danger","name","remove-circle-outline","style","color: #fff;",3,"click",4,"ngIf"],["name","briefcase-outline"],["button","","color","danger","name","remove-circle-outline",2,"color","#fff",3,"click"],["conditionFalse",""],["name","person-outline"]],template:function(t,e){if(1&t&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-buttons",0),c._UZ(3,"ion-menu-button",1),c.qZA(),c.qZA(),c.qZA(),c.TgZ(4,"ion-content"),c._UZ(5,"div",2),c.TgZ(6,"ion-refresher",3),c.NdJ("ionRefresh",function(t){return e.doRefresh(t)}),c._UZ(7,"ion-refresher-content"),c.qZA(),c.TgZ(8,"ion-card"),c.TgZ(9,"div",4),c._UZ(10,"img",5),c.qZA(),c.TgZ(11,"div",6),c.TgZ(12,"ion-card-title",7),c._uU(13),c.qZA(),c._uU(14),c.qZA(),c._UZ(15,"hr"),c.TgZ(16,"div",8),c.TgZ(17,"ion-button",9),c.NdJ("click",function(){return e.updatePass()}),c._uU(18,"Update Password"),c.qZA(),c.YNc(19,p,7,0,"div",10),c.TgZ(20,"ion-button",9),c.NdJ("click",function(){return e.attachCompany()}),c._uU(21,"Attach to a company"),c.qZA(),c.TgZ(22,"ion-button",9),c.NdJ("click",function(){return e.signature()}),c._uU(23,"Upload a signature"),c.qZA(),c.TgZ(24,"ion-button",9),c.NdJ("click",function(){return e.deleteacc()}),c._uU(25,"Delete my account"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(26,"ion-card",11),c.TgZ(27,"ion-list"),c.TgZ(28,"ion-list-header"),c.TgZ(29,"ion-label"),c._uU(30,"My Details"),c.qZA(),c.TgZ(31,"ion-button",12),c.NdJ("click",function(){return e.editProfile()}),c._UZ(32,"ion-icon",13),c.qZA(),c.qZA(),c.TgZ(33,"ion-item",14),c._UZ(34,"ion-icon",15),c.TgZ(35,"ion-label",16),c._uU(36),c.qZA(),c.qZA(),c.TgZ(37,"ion-item",14),c._UZ(38,"ion-icon",17),c.TgZ(39,"ion-label",16),c._uU(40),c.qZA(),c.qZA(),c.TgZ(41,"ion-item",14),c._UZ(42,"ion-icon",18),c.TgZ(43,"ion-label",16),c._uU(44),c._UZ(45,"br"),c._uU(46),c._UZ(47,"br"),c._uU(48),c._UZ(49,"br"),c._uU(50),c._UZ(51,"br"),c._uU(52),c._UZ(53,"br"),c.qZA(),c.qZA(),c.TgZ(54,"ion-item"),c.TgZ(55,"ion-label",19),c._uU(56),c.qZA(),c._UZ(57,"ion-input",20),c.qZA(),c.TgZ(58,"ion-item"),c.TgZ(59,"ion-label",19),c._uU(60,"Certification Date:"),c.qZA(),c._UZ(61,"ion-input",20),c.qZA(),c.TgZ(62,"ion-item"),c.TgZ(63,"ion-label",19),c._uU(64,"Re-certification Date:"),c.qZA(),c._UZ(65,"ion-input",20),c.qZA(),c.YNc(66,d,17,4,"div",10),c.qZA(),c.qZA(),c.TgZ(67,"ion-card",11),c.TgZ(68,"ion-list"),c.TgZ(69,"ion-list-header"),c.TgZ(70,"ion-label"),c._uU(71,"Attached Company"),c.qZA(),c.qZA(),c.YNc(72,g,5,0,"div",21),c.YNc(73,Z,1,1,"ng-template",null,22,c.W1O),c.qZA(),c.qZA(),c.YNc(75,b,8,2,"ion-card",10),c.qZA()),2&t){const t=c.MAs(74);c.xp6(13),c.Oqu(e.name),c.xp6(1),c.hij(" ",e.type," "),c.xp6(5),c.Q6J("ngIf","RBT"==e.type),c.xp6(17),c.Oqu(e.email),c.xp6(4),c.Oqu(e.contact),c.xp6(4),c.hij(" ",e.address," "),c.xp6(2),c.hij(" ",e.address1," "),c.xp6(2),c.hij(" ",e.city," "),c.xp6(2),c.hij(" ",e.state," "),c.xp6(2),c.hij(" ",e.zipcode," "),c.xp6(4),c.hij("",e.stype," No.:"),c.xp6(1),c.s9C("value",e.supid),c.xp6(4),c.s9C("value",e.certdate),c.xp6(4),c.s9C("value",e.recertdate),c.xp6(1),c.Q6J("ngIf","Supervisors"==e.type),c.xp6(6),c.Q6J("ngIf",0==e.comlng)("ngIfElse",t),c.xp6(3),c.Q6J("ngIf","RBT"==e.type)}},directives:[r.Gu,r.sr,r.Sm,r.fG,r.W2,r.nJ,r.Wo,r.PM,r.gZ,r.YG,n.O5,r.q_,r.yh,r.Q$,r.gu,r.Ie,r.pK,r.j9,n.sg],styles:["ion-button[_ngcontent-%COMP%], ion-card[_ngcontent-%COMP%]{font-family:Poetsen One!important;text-transform:none!important}.imgprofile[_ngcontent-%COMP%]{height:110px;padding:3px;border:2px solid #ffb444;border-radius:58px}.divimg[_ngcontent-%COMP%], .imgprofile[_ngcontent-%COMP%]{justify-content:center}.divimg[_ngcontent-%COMP%]{display:flex}.divimg[_ngcontent-%COMP%], .name[_ngcontent-%COMP%]{padding-top:10px}.name[_ngcontent-%COMP%]{color:#ffb444!important;font-size:22px}.divname[_ngcontent-%COMP%]{text-align:center}hr[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:8px;border:0;border-top:1px solid #202945}ion-icon[_ngcontent-%COMP%]{color:#000}#editprofile[_ngcontent-%COMP%]{float:right;color:#fff}.divbtns[_ngcontent-%COMP%]{margin-top:1em;margin-bottom:1em;text-align:center}ion-list-header[_ngcontent-%COMP%]{color:#ffb444;background-color:#202945;font-size:16px!important;margin-top:-10px!important;vertical-align:middle!important}ion-icon[_ngcontent-%COMP%]{padding:0 8px!important}ion-card-header[_ngcontent-%COMP%]{background-color:#ffb444;color:#fff}ion-header[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:#fff}.topicon[_ngcontent-%COMP%]{margin-top:-55px!important}ion-item[_ngcontent-%COMP%]{font-size:12px;--min-height:10px}ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}"]}),t})()}];let A=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[a.Bz.forChild(y)],a.Bz]}),t})(),T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[n.ez,i.u5,r.Pc,A]]}),t})()}}]);