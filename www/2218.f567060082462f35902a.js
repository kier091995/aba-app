(self.webpackChunkrbt_1=self.webpackChunkrbt_1||[]).push([[2218],{2218:(e,t,o)=>{"use strict";o.d(t,{k:()=>q});var n=o(1855),i=o(3709),a=o(3606),r=o(3991),s=o(427),c=o(4683),l=o(6274),u=o(4988);function d(e,t){if(1&e&&(a.TgZ(0,"ion-row"),a.TgZ(1,"ion-col",5),a._uU(2,"Time:"),a.qZA(),a.TgZ(3,"ion-col",6),a._uU(4),a.qZA(),a.qZA()),2&e){const e=a.oxw();a.xp6(4),a.Oqu(e.time)}}function g(e,t){if(1&e&&(a.TgZ(0,"ion-select-option",24),a._uU(1),a.qZA()),2&e){const e=t.$implicit;a.s9C("value",e),a.xp6(1),a.Oqu(e)}}function p(e,t){if(1&e){const e=a.EpF();a.ynx(0),a.TgZ(1,"form",16),a.NdJ("ngSubmit",function(){a.CHM(e);const t=a.MAs(12),o=a.MAs(7);return a.oxw(3).approve(t.value,o.value)}),a.TgZ(2,"ion-item"),a.TgZ(3,"ion-label"),a._uU(4,"Note:"),a.qZA(),a._UZ(5,"ion-input",17),a.qZA(),a._UZ(6,"input",18,19),a.TgZ(8,"ion-item"),a.TgZ(9,"ion-label"),a._uU(10,"Sched Type:"),a.qZA(),a.TgZ(11,"ion-select",null,20),a.YNc(13,g,2,2,"ion-select-option",21),a.qZA(),a.qZA(),a.TgZ(14,"ion-button",22),a._uU(15,"Approve"),a.qZA(),a.qZA(),a.TgZ(16,"ion-button",23),a._uU(17,"Reject"),a.qZA(),a.BQk()}if(2&e){const e=a.oxw(2).index,t=a.oxw();a.xp6(5),a.s9C("value",t.arrData[e][5]),a.xp6(1),a.s9C("value",t.arrData[e][0]),a.xp6(7),a.Q6J("ngForOf",t.arrData[e][1]),a.xp6(3),a.Tol(t.arrData[e][0])}}function h(e,t){1&e&&a._UZ(0,"ion-input",17),2&e&&a.s9C("value",t.$implicit)}function Z(e,t){if(1&e&&(a.TgZ(0,"ion-item"),a.TgZ(1,"ion-label"),a._uU(2,"Note:"),a.qZA(),a._UZ(3,"ion-input",17),a.qZA(),a.TgZ(4,"ion-item"),a.TgZ(5,"ion-label"),a._uU(6,"Status:"),a.qZA(),a._UZ(7,"ion-input",17),a.qZA(),a.TgZ(8,"ion-item"),a.TgZ(9,"ion-label"),a._uU(10,"Sched Type:"),a.qZA(),a.YNc(11,h,1,1,"ion-input",25),a.qZA()),2&e){const e=a.oxw(2).index,t=a.oxw();a.xp6(3),a.s9C("value",t.arrData[e][5]),a.xp6(4),a.s9C("value",t.arrData[e][6]),a.xp6(4),a.Q6J("ngForOf",t.arrData[e][1])}}function m(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ion-col",12),a.TgZ(1,"button",13),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).getData("")}),a.qZA(),a.TgZ(2,"ion-item"),a.TgZ(3,"p"),a.TgZ(4,"strong"),a._uU(5),a.qZA(),a._uU(6," wants you to supervise his/her work at "),a.TgZ(7,"strong"),a._uU(8),a.qZA(),a.qZA(),a.qZA(),a.YNc(9,p,18,6,"ng-container",14),a.YNc(10,Z,12,3,"ng-template",null,15,a.W1O),a.qZA()}if(2&e){const e=a.MAs(11),t=a.oxw().index,o=a.oxw();a.xp6(5),a.Oqu(o.arrData[t][2]),a.xp6(3),a.AsE("",o.arrData[t][3]," at ",o.arrData[t][4]," "),a.xp6(1),a.Q6J("ngIf",""!=o.arrData[t][0])("ngIfElse",e)}}function f(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ion-col",26),a.TgZ(1,"ion-item"),a.TgZ(2,"ion-label",27),a._uU(3,"RBT:"),a.qZA(),a._UZ(4,"ion-input",17),a.qZA(),a.TgZ(5,"ion-item"),a.TgZ(6,"ion-label",27),a._uU(7,"Company:"),a.qZA(),a._UZ(8,"ion-input",17),a.qZA(),a.TgZ(9,"ion-item"),a.TgZ(10,"ion-label",27),a._uU(11,"Time:"),a.qZA(),a._UZ(12,"ion-input",17),a.qZA(),a.TgZ(13,"ion-item"),a.TgZ(14,"ion-label",27),a._uU(15,"Note:"),a.qZA(),a.TgZ(16,"p"),a._uU(17),a.qZA(),a.TgZ(18,"ion-button",28),a.NdJ("click",function(){a.CHM(e);const t=a.oxw().index,o=a.oxw();return o.log(o.arrData[t][5],o.arrData[t][6])}),a._uU(19),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw().index,t=a.oxw();a.xp6(4),a.s9C("value",t.arrData[e][0]),a.xp6(4),a.s9C("value",t.arrData[e][1]),a.xp6(4),a.s9C("value",t.arrData[e][2]),a.xp6(5),a.Oqu(t.arrData[e][3]),a.xp6(2),a.Oqu(t.arrData[e][4])}}function T(e,t){if(1&e&&(a.TgZ(0,"ion-row"),a.YNc(1,m,12,5,"ion-col",10),a.YNc(2,f,20,5,"ng-template",null,11,a.W1O),a.qZA()),2&e){const e=a.MAs(3),t=a.oxw();a.xp6(1),a.Q6J("ngIf","x"!=t.time)("ngIfElse",e)}}let q=(()=>{class e{constructor(e,t,o,n,i,a,r,s){this.router=e,this.postPvd=t,this.toastController=o,this.menuCtrl=n,this.modalController=i,this.actionSheetController=a,this.alertController=r,this.plt=s}ngOnInit(){var e=this.yrmonth.split(" ");function t(e,t){console.log(e);var o=localStorage.getItem("HOMELINK").slice(0,-1)+"CancelSched/";console.log(o),$.ajax({url:o,type:"POST",dataType:"json",data:{action:"cancel",datacode:t,note:e},success:function(e){console.log(e),"ok"==e.stat?(function(e){(0,n.mG)(this,void 0,void 0,function*(){const e=document.createElement("ion-toast");return e.message="<center>The schedule is rejected!</center>",e.duration=2e3,e.color="success",document.body.appendChild(e),e.present()})}(),$("#getDataSched").click()):function(e){(0,n.mG)(this,void 0,void 0,function*(){const e=document.createElement("ion-toast");return e.message="<center>Error occured!</center>",e.duration=2e3,e.color="danger",document.body.appendChild(e),e.present()})}()}})}this.thisDay=e[0]+" "+this.day+", "+e[1],this.getData(this.time),$("body").on("click","#reject",function(){!function(e){(0,n.mG)(this,void 0,void 0,function*(){var o=e.split(" ");const n=document.createElement("ion-alert");n.subHeader="Attention!!!",n.message="Please indicate below why this schedule is rejected:",n.inputs=[{name:"note",placeholder:"Note"}],n.buttons=[{text:"Reject",cssClass:"secondary",handler:e=>{console.log(t(e.note,o[0])),t(e.note,o[0])}}],document.body.appendChild(n),yield n.present()})}($(this).attr("class"))})}backButton(){this.modalController.dismiss({dismissed:!0})}getData(e){return""!=this.codesched?(this.title="Schedule Request",new Promise(e=>{let t={action:"fetchScheduleList",ucode:localStorage.getItem("UCODE"),schedcode:this.codesched,time:this.time,yrmonth:this.yrmonth,day:this.day};console.log(this.time),this.postPvd.postData(t,localStorage.getItem("HOMELINK")).subscribe(e=>{"ok"==e.status?(this.arrData=e.details,console.log(e.details)):this.openToaste("Error occured!")})})):(this.title="RBT Work Schedule",new Promise(e=>{let t={action:"fetchworkschedbcba",ucode:localStorage.getItem("UCODE"),date:this.thisDay};this.postPvd.postData(t,localStorage.getItem("HOMELINK")).subscribe(e=>{"ok"==e.status?(this.arrData=e.details,console.log(e.details)):this.openToaste("Error occured!")})}))}openToasts(e){return(0,n.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"<center>"+e+"</center>",duration:2e3,color:"success"})).present()})}openToaste(e){return(0,n.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"<center>"+e+"</center>",duration:2e3,color:"danger"})).present()})}doRefresh(e){setTimeout(()=>{this.getData(""),e.target.complete()},2e3)}approve(e,t){if(e){var o=localStorage.getItem("HOMELINK").slice(0,-1)+"WithEmails/ApproveSched";$.ajax({url:o,type:"POST",dataType:"json",data:{datacode:t,type:e},success:function(e){console.log(e),"ok"==e.status?(function(e){(0,n.mG)(this,void 0,void 0,function*(){const e=document.createElement("ion-toast");return e.message="<center>The schedule is approved!</center>",e.duration=2e3,e.color="success",document.body.appendChild(e),e.present()})}(),$("#getDataSched").click()):i("Error occured!")}})}else i("Please select a sched type!");function i(e){return(0,n.mG)(this,void 0,void 0,function*(){const t=document.createElement("ion-toast");return t.message="<center>"+e+"</center>",t.duration=2e3,t.color="danger",document.body.appendChild(t),t.present()})}}log(e,t){this.goLog(t,e)}goLog(e,t){return(0,n.mG)(this,void 0,void 0,function*(){const o=yield this.modalController.create({component:i.G,componentProps:{ucode:localStorage.getItem("UCODE"),code:e,type:t}});return o.onDidDismiss().then(e=>{this.getData("")}),yield o.present()})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(r.F0),a.Y36(s.B),a.Y36(c.yF),a.Y36(c._q),a.Y36(c.IN),a.Y36(c.BX),a.Y36(c.Br),a.Y36(c.t4))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-bcba-calendar-modal-details"]],inputs:{codesched:"codesched",yrmonth:"yrmonth",day:"day",time:"time",title:"title"},decls:25,vars:4,consts:[["slot","start"],[3,"click"],["name","chevron-back-outline",1,"return"],["slot","fixed",3,"ionRefresh"],[1,"tblclass"],["size","3",1,"head"],["size","9",1,"head"],[4,"ngIf"],["size","12",1,"header-r"],[4,"ngFor","ngForOf"],["class","header-r1","size","12",4,"ngIf","ngIfElse"],["notime",""],["size","12",1,"header-r1"],["id","getDataSched",3,"click"],[4,"ngIf","ngIfElse"],["thiselse",""],[3,"ngSubmit"],["readonly","",3,"value"],["type","hidden",3,"value"],["hdncode",""],["sel",""],[3,"value",4,"ngFor","ngForOf"],["button","","color","secondary","size","small","type","submit","expand","block"],["button","","color","danger","size","small","expand","block","id","reject"],[3,"value"],["readonly","",3,"value",4,"ngFor","ngForOf"],[1,"header-r1"],["position","stacked"],["size","small",3,"click"]],template:function(e,t){1&e&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-buttons",0),a.TgZ(3,"ion-button",1),a.NdJ("click",function(){return t.backButton()}),a._UZ(4,"ion-icon",2),a.TgZ(5,"ion-label"),a._uU(6,"Back"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(7,"ion-content"),a.TgZ(8,"ion-refresher",3),a.NdJ("ionRefresh",function(e){return t.doRefresh(e)}),a._UZ(9,"ion-refresher-content"),a.qZA(),a.TgZ(10,"ion-list"),a.TgZ(11,"ion-list-header"),a.TgZ(12,"ion-label"),a._uU(13),a.qZA(),a.qZA(),a.qZA(),a.TgZ(14,"ion-grid",4),a.TgZ(15,"ion-row"),a.TgZ(16,"ion-col",5),a._uU(17,"Date:"),a.qZA(),a.TgZ(18,"ion-col",6),a._uU(19),a.qZA(),a.qZA(),a.YNc(20,d,5,1,"ion-row",7),a.TgZ(21,"ion-row"),a.TgZ(22,"ion-col",8),a._uU(23,"Details"),a.qZA(),a.qZA(),a.YNc(24,T,4,2,"ion-row",9),a.qZA(),a.qZA()),2&e&&(a.xp6(13),a.Oqu(t.title),a.xp6(6),a.Oqu(t.thisDay),a.xp6(1),a.Q6J("ngIf","x"!=t.time),a.xp6(4),a.Q6J("ngForOf",t.arrData))},directives:[c.Gu,c.sr,c.Sm,c.YG,c.gu,c.Q$,c.W2,c.nJ,c.Wo,c.q_,c.yh,c.jY,c.Nd,c.wI,l.O5,l.sg,c.Ie,u._Y,u.JL,u.F,c.pK,c.j9,c.t9,c.QI,c.n0],styles:["ion-list-header[_ngcontent-%COMP%]{color:#202945;font-weight:500;font-family:Poetsen One;font-size:larger;text-align:center;margin-left:-10px!important}ion-button[_ngcontent-%COMP%]{text-transform:none;font-family:Poetsen One}ion-col[_ngcontent-%COMP%], ion-col[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{font-size:12px;text-align:justify}.head[_ngcontent-%COMP%]{font-weight:400;font-size:13px}.head[_ngcontent-%COMP%], .header-r[_ngcontent-%COMP%]{text-align:center;font-family:Poetsen One}.header-r[_ngcontent-%COMP%]{font-size:14px;background-color:#ffb444}.header-r[_ngcontent-%COMP%], .header-r1[_ngcontent-%COMP%]{border:1px solid #000}.header-r1[_ngcontent-%COMP%]{border-top:0!important}"]}),e})()}}]);