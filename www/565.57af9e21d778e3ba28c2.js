(self.webpackChunkrbt_1=self.webpackChunkrbt_1||[]).push([[565],{565:(e,t,o)=>{"use strict";o.r(t),o.d(t,{WorkScheduleCreatePageModule:()=>m});var n=o(6274),i=o(4988),s=o(4683),a=o(3991),r=o(1855),c=o(3606),l=o(427);function d(e,t){if(1&e&&(c.TgZ(0,"ion-select-option",11),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.s9C("value",e[0]),c.xp6(1),c.Oqu(e[1])}}function u(e,t){if(1&e&&(c.TgZ(0,"ion-select-option",11),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.s9C("value",e[0]),c.xp6(1),c.Oqu(e[1])}}const g=function(){return{standalone:!0}},h=[{path:"",component:(()=>{class e{constructor(e,t,o,n,i,s,a){this.router=e,this.postPvd=t,this.toastController=o,this.menuCtrl=n,this.alertController=i,this.plt=s,this.location=a,this.disabledCreateWorkSched=!1,this.show=!0,this.disabledButton=!1}ngOnInit(){this.getCompany(),(new Date).getFullYear(),this.maxyr=(new Date).getFullYear()+5}backButton(){this.location.back()}openToasts(e){return(0,r.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"<center>"+e+"</center>",duration:2e3,color:"success"})).present()})}openToaste(e){return(0,r.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"<center>"+e+"</center>",duration:2e3,color:"danger"})).present()})}getCompany(){return new Promise(e=>{let t={action:"rbtgetcompany",ucode:localStorage.getItem("UCODE")};this.postPvd.postData(t,localStorage.getItem("HOMELINK")).subscribe(e=>{"ok"==e.stats?(this.companies=e.datax,console.log(e)):this.openToaste("<center>Error occured!</center>")})})}optionsFn(){if(this.company)return console.log("x1"),new Promise(e=>{let t={action:"rbtgetvisor",ucode:localStorage.getItem("UCODE"),code:this.company};this.postPvd.postData(t,localStorage.getItem("HOMELINK")).subscribe(e=>{"ok"==e.stat?this.supervisors=e.visor:this.openToaste("Error on fetching details.")})})}timeChange(){if(this.st&&this.et)return console.log("x2"),new Promise(e=>{let t={action:"rbtvalidatetime",supervisor:this.supervisor,cdates:$("#fd").val(),cdatee:$("#td").val(),start:this.st,end:this.et};this.postPvd.postData(t,localStorage.getItem("HOMELINK")).subscribe(e=>{"ok"==e.stats?(console.log(e),0==e.count?$("#save").css("display",""):($("#save").css("display","none"),this.openToaste("The supervisor that you choose already have appointment on the selected time and day."))):this.openToaste("Error occured!")})})}save(){if(this.disabledCreateWorkSched=!0,this.plt.is("ios"))var e="ios";else e=this.plt.is("android")?"android":"APP";var t=0;if($(".req").each(function(){""==$(this).val()&&t++}),0==t){var o=localStorage.getItem("HOMELINK").slice(0,-1)+"WithEmails/createWorkSchedRBT";$.ajax({url:o,type:"POST",dataType:"json",data:{action:"save",ucode:localStorage.getItem("UCODE"),ccomp:this.company,csup:this.supervisor,cdates:$("#fd").val(),cdatee:$("#td").val(),cstime:this.st,cetime:this.et,cnote:$("#note").val(),plt:e},success:function(e){"ok"==e.status?(function(e){(0,r.mG)(this,void 0,void 0,function*(){const e=document.createElement("ion-toast");return e.message="<center>Work schedule has been created.</center>",e.duration=2e3,e.color="success",document.body.appendChild(e),e.present()})}(),this.disabledCreateWorkSched=!1,setTimeout(function(){this.show=!1,this.supervisors=[],$("ion-datetime").val(""),$("ion-textarea").val(""),this.supervisor="",this.company=""},3e3)):(this.disabledCreateWorkSched=!1,function(e){(0,r.mG)(this,void 0,void 0,function*(){const e=document.createElement("ion-toast");return e.message="<center>Error occured!</center>",e.duration=2e3,e.color="danger",document.body.appendChild(e),e.present()})}(),$("#save").removeAttr("disabled"))}})}else this.disabledCreateWorkSched=!1,$("#save").css("display",""),this.openToaste("<center>All fields are required!</center>")}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(a.F0),c.Y36(l.B),c.Y36(s.yF),c.Y36(s._q),c.Y36(s.Br),c.Y36(s.t4),c.Y36(n.Ye))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-work-schedule-create"]],decls:41,vars:13,consts:[["slot","start"],["autoHide","false"],["position","floating"],[3,"ngModel","ngModelChange","ionChange"],["class","req",3,"value",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],["id","fd","placeholder","Select Date","display-format","YYYY-MM-DD",1,"req",3,"max"],["id","td","placeholder","Select Date","display-format","YYYY-MM-DD",1,"req",3,"max"],["display-format","h:mm A","picker-format","h:mm A","placeholder","00:00",1,"req",3,"ngModel","ngModelOptions","ngModelChange","ionChange"],["id","note","placeholder","Note",1,"req"],["expand","block","color","secondary","size","small","id","save",2,"display","none",3,"disabled","click"],[1,"req",3,"value"]],template:function(e,t){1&e&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-buttons",0),c._UZ(3,"ion-menu-button",1),c.qZA(),c.qZA(),c.qZA(),c.TgZ(4,"ion-content"),c.TgZ(5,"ion-list"),c.TgZ(6,"ion-list-header"),c.TgZ(7,"ion-label"),c._uU(8,"Work Schedule"),c.qZA(),c.qZA(),c.TgZ(9,"ion-item"),c.TgZ(10,"ion-label",2),c._uU(11,"Select Company: "),c.qZA(),c.TgZ(12,"ion-select",3),c.NdJ("ngModelChange",function(e){return t.company=e})("ionChange",function(){return t.optionsFn()}),c.YNc(13,d,2,2,"ion-select-option",4),c.qZA(),c.qZA(),c.TgZ(14,"ion-item"),c.TgZ(15,"ion-label",2),c._uU(16,"Select Supervisor: "),c.qZA(),c.TgZ(17,"ion-select",5),c.NdJ("ngModelChange",function(e){return t.supervisor=e}),c.YNc(18,u,2,2,"ion-select-option",4),c.qZA(),c.qZA(),c.TgZ(19,"ion-item"),c.TgZ(20,"ion-label",2),c._uU(21,"From Date: "),c.qZA(),c._UZ(22,"ion-datetime",6),c.qZA(),c.TgZ(23,"ion-item"),c.TgZ(24,"ion-label",2),c._uU(25,"To Date: "),c.qZA(),c._UZ(26,"ion-datetime",7),c.qZA(),c.TgZ(27,"ion-item"),c.TgZ(28,"ion-label",2),c._uU(29,"Start Time: "),c.qZA(),c.TgZ(30,"ion-datetime",8),c.NdJ("ngModelChange",function(e){return t.st=e})("ionChange",function(){return t.timeChange()}),c.qZA(),c.qZA(),c.TgZ(31,"ion-item"),c.TgZ(32,"ion-label",2),c._uU(33,"End Time: "),c.qZA(),c.TgZ(34,"ion-datetime",8),c.NdJ("ngModelChange",function(e){return t.et=e})("ionChange",function(){return t.timeChange()}),c.qZA(),c.qZA(),c.TgZ(35,"ion-item"),c.TgZ(36,"ion-label",2),c._uU(37,"Note: "),c.qZA(),c._UZ(38,"ion-textarea",9),c.qZA(),c.TgZ(39,"ion-button",10),c.NdJ("click",function(){return t.save()}),c._uU(40,"Save"),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(12),c.Q6J("ngModel",t.company),c.xp6(1),c.Q6J("ngForOf",t.companies),c.xp6(4),c.Q6J("ngModel",t.supervisor),c.xp6(1),c.Q6J("ngForOf",t.supervisors),c.xp6(4),c.s9C("max",t.maxyr),c.xp6(4),c.s9C("max",t.maxyr),c.xp6(4),c.Q6J("ngModel",t.st)("ngModelOptions",c.DdM(11,g)),c.xp6(4),c.Q6J("ngModel",t.et)("ngModelOptions",c.DdM(12,g)),c.xp6(5),c.Q6J("disabled",t.disabledCreateWorkSched))},directives:[s.Gu,s.sr,s.Sm,s.fG,s.W2,s.q_,s.yh,s.Q$,s.Ie,s.t9,s.QI,i.JJ,i.On,n.sg,s.x4,s.g2,s.j9,s.YG,s.n0],styles:["ion-list-header[_ngcontent-%COMP%]{color:#202945;font-weight:500;font-family:Poetsen One;font-size:larger;text-align:center;margin-left:-10px!important}ion-button[_ngcontent-%COMP%]{text-transform:none;font-family:Poetsen One}ion-col[_ngcontent-%COMP%], ion-col[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{font-size:12px;text-align:justify}.head[_ngcontent-%COMP%]{font-weight:400;font-size:13px}.head[_ngcontent-%COMP%], .header-r[_ngcontent-%COMP%]{text-align:center;font-family:Poetsen One}.header-r[_ngcontent-%COMP%]{font-size:14px;background-color:#ffb444}.header-r[_ngcontent-%COMP%], .header-r1[_ngcontent-%COMP%]{border:1px solid #000}.header-r1[_ngcontent-%COMP%]{border-top:0!important}ion-item[_ngcontent-%COMP%]{font-size:12px;--min-height:10px}"]}),e})()}];let p=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[a.Bz.forChild(h)],a.Bz]}),e})(),m=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[n.ez,i.u5,s.Pc,p]]}),e})()}}]);