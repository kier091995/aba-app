{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { BcbaCalendarModalPage } from '../bcba-calendar-modal/bcba-calendar-modal.page';\nimport { BcbaCalendarModalDetailsPage } from '../bcba-calendar-modal-details/bcba-calendar-modal-details.page';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../providers/post-provider.service\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\n\nfunction BcbaCalendarPage_ion_select_option_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-select-option\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const x_r2 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", x_r2[1]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(x_r2[0]);\n  }\n}\n\nfunction BcbaCalendarPage_ion_row_48_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-row\");\n    i0.ɵɵelementStart(1, \"ion-col\", 17);\n    i0.ɵɵlistener(\"click\", function BcbaCalendarPage_ion_row_48_Template_ion_col_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const t_r3 = restoredCtx.$implicit;\n      const i_r4 = restoredCtx.index;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.presentActionSheet(t_r3[0], ctx_r5.schedCode[i_r4][0], ctx_r5.dateView[i_r4][0]);\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ion-col\", 17);\n    i0.ɵɵlistener(\"click\", function BcbaCalendarPage_ion_row_48_Template_ion_col_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const t_r3 = restoredCtx.$implicit;\n      const i_r4 = restoredCtx.index;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.presentActionSheet(t_r3[1], ctx_r7.schedCode[i_r4][1], ctx_r7.dateView[i_r4][1]);\n    });\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"ion-col\", 17);\n    i0.ɵɵlistener(\"click\", function BcbaCalendarPage_ion_row_48_Template_ion_col_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const t_r3 = restoredCtx.$implicit;\n      const i_r4 = restoredCtx.index;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.presentActionSheet(t_r3[2], ctx_r8.schedCode[i_r4][2], ctx_r8.dateView[i_r4][2]);\n    });\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"ion-col\", 17);\n    i0.ɵɵlistener(\"click\", function BcbaCalendarPage_ion_row_48_Template_ion_col_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const t_r3 = restoredCtx.$implicit;\n      const i_r4 = restoredCtx.index;\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.presentActionSheet(t_r3[3], ctx_r9.schedCode[i_r4][3], ctx_r9.dateView[i_r4][3]);\n    });\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"ion-col\", 17);\n    i0.ɵɵlistener(\"click\", function BcbaCalendarPage_ion_row_48_Template_ion_col_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const t_r3 = restoredCtx.$implicit;\n      const i_r4 = restoredCtx.index;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.presentActionSheet(t_r3[4], ctx_r10.schedCode[i_r4][4], ctx_r10.dateView[i_r4][4]);\n    });\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"ion-col\", 17);\n    i0.ɵɵlistener(\"click\", function BcbaCalendarPage_ion_row_48_Template_ion_col_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const t_r3 = restoredCtx.$implicit;\n      const i_r4 = restoredCtx.index;\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.presentActionSheet(t_r3[5], ctx_r11.schedCode[i_r4][5], ctx_r11.dateView[i_r4][5]);\n    });\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"ion-col\", 17);\n    i0.ɵɵlistener(\"click\", function BcbaCalendarPage_ion_row_48_Template_ion_col_click_13_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const t_r3 = restoredCtx.$implicit;\n      const i_r4 = restoredCtx.index;\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.presentActionSheet(t_r3[6], ctx_r12.schedCode[i_r4][6], ctx_r12.dateView[i_r4][6]);\n    });\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const t_r3 = ctx.$implicit;\n    const i_r4 = ctx.index;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"header-r1 ion\", ctx_r1.arrColor[i_r4][0], \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(t_r3[0]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"header-r1 ion\", ctx_r1.arrColor[i_r4][1], \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(t_r3[1]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"header-r1 ion\", ctx_r1.arrColor[i_r4][2], \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(t_r3[2]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"header-r1 ion\", ctx_r1.arrColor[i_r4][3], \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(t_r3[3]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"header-r1 ion\", ctx_r1.arrColor[i_r4][4], \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(t_r3[4]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"header-r1 ion\", ctx_r1.arrColor[i_r4][5], \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(t_r3[5]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"header1 ion\", ctx_r1.arrColor[i_r4][6], \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(t_r3[6]);\n  }\n}\n\nexport let BcbaCalendarPage = /*#__PURE__*/(() => {\n  class BcbaCalendarPage {\n    constructor(router, postPvd, toastController, menuCtrl, modalController, actionSheetController) {\n      this.router = router;\n      this.postPvd = postPvd;\n      this.toastController = toastController;\n      this.menuCtrl = menuCtrl;\n      this.modalController = modalController;\n      this.actionSheetController = actionSheetController;\n    }\n\n    ngOnInit() {\n      this.min = new Date().getFullYear().toString() + '-' + (new Date().getMonth() + 1).toString().padStart(2, \"0\");\n      this.max = (new Date().getFullYear() + 1).toString();\n      this.getCompany();\n    }\n\n    getCompany() {\n      return new Promise(resolve => {\n        let body = {\n          action: 'getBCBACompany',\n          ucode: localStorage.getItem(\"UCODE\")\n        };\n        this.postPvd.postData(body, localStorage.getItem('HOMELINK')).subscribe(data => {\n          if (data['status'] == 'ok') {\n            this.companies = data['companies'];\n            console.log(data);\n          } else {\n            this.openToaste('Error on fetching details.');\n          }\n        });\n      });\n    }\n\n    openToasts(msg) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const toast = yield this.toastController.create({\n          message: '<center>' + msg + '</center>',\n          duration: 2000,\n          color: 'success'\n        });\n        toast.present();\n      });\n    }\n\n    openToaste(msg) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const toast = yield this.toastController.create({\n          message: '<center>' + msg + '</center>',\n          duration: 2000,\n          color: 'danger'\n        });\n        toast.present();\n      });\n    }\n\n    doRefresh(event) {\n      setTimeout(() => {\n        this.ym = '';\n        this.company = '';\n        this.getCompany();\n        event.target.complete();\n      }, 2000);\n    }\n\n    optionsFn() {\n      // console.log(this.company, this.ym);\n      if (this.company != undefined && this.ym != undefined && this.company != '' && this.ym != '') {\n        return new Promise(resolve => {\n          let body = {\n            action: 'getBCBASched',\n            ucode: localStorage.getItem(\"UCODE\"),\n            company: this.company,\n            ym: this.ym\n          };\n          this.postPvd.postData(body, localStorage.getItem('HOMELINK')).subscribe(data => {\n            if (data['status'] == 'ok') {\n              this.tr = data['dates'];\n              this.yrmonth = data['details'];\n              this.schedCode = data['schedCode'];\n              this.dateView = data['dateView'];\n              this.arrColor = data['arrColor'];\n              $('#tblData').show();\n              console.log(this.arrColor);\n            } else {\n              this.openToaste('Error on fetching details.');\n            }\n          });\n        });\n      } else {\n        $('#tblData').hide();\n      }\n    }\n\n    presentActionSheet(day, codesched, date) {\n      return __awaiter(this, void 0, void 0, function* () {\n        if (day) {\n          const actionSheet = yield this.actionSheetController.create({\n            header: 'Schedule: ' + date,\n            cssClass: 'match-item-action-sheet',\n            buttons: [{\n              text: 'My Supervision Availability',\n              cssClass: 'actionSheet',\n              handler: () => {\n                this.openModal(codesched, 'My Supervision Availability', this.yrmonth, day, 'BcbaCalendarModalPage');\n              }\n            }, {\n              text: 'My RBT Work Schedule',\n              cssClass: 'actionSheet',\n              handler: () => {\n                this.openModal('', 'My RBT Work Schedule', this.yrmonth, day, 'BcbaCalendarModalDetailsPage');\n              }\n            }]\n          });\n          yield actionSheet.present();\n          const {\n            role\n          } = yield actionSheet.onDidDismiss();\n        }\n      });\n    }\n\n    openModal(val, header, yrmonth, day, component) {\n      return __awaiter(this, void 0, void 0, function* () {\n        var arr = [];\n        var componentx;\n\n        if (component == 'BcbaCalendarModalPage') {\n          componentx = BcbaCalendarModalPage;\n          arr = [{\n            codesched: val,\n            yrmonth: yrmonth,\n            day: day,\n            headertitle: header,\n            company: this.company\n          }];\n        } else if (component == 'BcbaCalendarModalDetailsPage') {\n          componentx = BcbaCalendarModalDetailsPage;\n          arr = [{\n            codesched: val,\n            yrmonth: yrmonth,\n            day: day,\n            time: 'x',\n            title: 'Work Schedule'\n          }];\n        }\n\n        const modal = yield this.modalController.create({\n          component: componentx,\n          componentProps: arr[0]\n        });\n        modal.onDidDismiss().then(data => {\n          this.optionsFn();\n        });\n        return yield modal.present();\n      });\n    }\n\n  }\n\n  BcbaCalendarPage.ɵfac = function BcbaCalendarPage_Factory(t) {\n    return new (t || BcbaCalendarPage)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.PostProviderService), i0.ɵɵdirectiveInject(i3.ToastController), i0.ɵɵdirectiveInject(i3.MenuController), i0.ɵɵdirectiveInject(i3.ModalController), i0.ɵɵdirectiveInject(i3.ActionSheetController));\n  };\n\n  BcbaCalendarPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BcbaCalendarPage,\n    selectors: [[\"app-bcba-calendar\"]],\n    decls: 49,\n    vars: 7,\n    consts: [[\"slot\", \"start\"], [\"autoHide\", \"false\"], [\"slot\", \"fixed\", 3, \"ionRefresh\"], [\"position\", \"floating\"], [\"display-format\", \"MMMM-YYYY\", 3, \"min\", \"max\", \"ngModel\", \"ngModelChange\", \"ionChange\"], [3, \"ngModel\", \"ngModelChange\", \"ionChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"tblData\", 1, \"tblclass\", 2, \"display\", \"none\"], [\"size\", \"12\", 1, \"head\"], [1, \"ionactive\"], [1, \"ionactivesuper\"], [1, \"ionactivework\"], [1, \"ionactivesuperwork\"], [\"size\", \"1.7\", 1, \"header-r\"], [\"size\", \"1.7\", 1, \"header\"], [4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [\"button\", \"\", \"size\", \"1.7\", 3, \"click\"]],\n    template: function BcbaCalendarPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\");\n        i0.ɵɵelementStart(1, \"ion-toolbar\");\n        i0.ɵɵelementStart(2, \"ion-buttons\", 0);\n        i0.ɵɵelement(3, \"ion-menu-button\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"ion-content\");\n        i0.ɵɵelementStart(5, \"ion-refresher\", 2);\n        i0.ɵɵlistener(\"ionRefresh\", function BcbaCalendarPage_Template_ion_refresher_ionRefresh_5_listener($event) {\n          return ctx.doRefresh($event);\n        });\n        i0.ɵɵelement(6, \"ion-refresher-content\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"ion-list\");\n        i0.ɵɵelementStart(8, \"ion-list-header\");\n        i0.ɵɵelementStart(9, \"ion-label\");\n        i0.ɵɵtext(10, \"BCBA Calendar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"ion-item\");\n        i0.ɵɵelementStart(12, \"ion-label\", 3);\n        i0.ɵɵtext(13, \"Select year and month: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"ion-datetime\", 4);\n        i0.ɵɵlistener(\"ngModelChange\", function BcbaCalendarPage_Template_ion_datetime_ngModelChange_14_listener($event) {\n          return ctx.ym = $event;\n        })(\"ionChange\", function BcbaCalendarPage_Template_ion_datetime_ionChange_14_listener() {\n          return ctx.optionsFn();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"ion-item\");\n        i0.ɵɵelementStart(16, \"ion-label\", 3);\n        i0.ɵɵtext(17, \"Select company: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"ion-select\", 5);\n        i0.ɵɵlistener(\"ngModelChange\", function BcbaCalendarPage_Template_ion_select_ngModelChange_18_listener($event) {\n          return ctx.company = $event;\n        })(\"ionChange\", function BcbaCalendarPage_Template_ion_select_ionChange_18_listener() {\n          return ctx.optionsFn();\n        });\n        i0.ɵɵtemplate(19, BcbaCalendarPage_ion_select_option_19_Template, 2, 2, \"ion-select-option\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"ion-grid\", 7);\n        i0.ɵɵelementStart(21, \"ion-row\");\n        i0.ɵɵelementStart(22, \"ion-col\", 8);\n        i0.ɵɵtext(23);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"ion-row\");\n        i0.ɵɵelementStart(25, \"ion-badge\", 9);\n        i0.ɵɵtext(26, \"Active\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"ion-badge\", 10);\n        i0.ɵɵtext(28, \"Supervision\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"ion-badge\", 11);\n        i0.ɵɵtext(30, \"Work Sched\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"ion-badge\", 12);\n        i0.ɵɵtext(32, \"Supervision & Work Sched\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"ion-row\");\n        i0.ɵɵelementStart(34, \"ion-col\", 13);\n        i0.ɵɵtext(35, \"Sun\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"ion-col\", 13);\n        i0.ɵɵtext(37, \"Mon\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"ion-col\", 13);\n        i0.ɵɵtext(39, \"Tue\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(40, \"ion-col\", 13);\n        i0.ɵɵtext(41, \"Wed\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(42, \"ion-col\", 13);\n        i0.ɵɵtext(43, \"Thu\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(44, \"ion-col\", 13);\n        i0.ɵɵtext(45, \"Fri\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(46, \"ion-col\", 14);\n        i0.ɵɵtext(47, \"Sat\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(48, BcbaCalendarPage_ion_row_48_Template, 15, 28, \"ion-row\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(14);\n        i0.ɵɵpropertyInterpolate(\"min\", ctx.min);\n        i0.ɵɵpropertyInterpolate(\"max\", ctx.max);\n        i0.ɵɵproperty(\"ngModel\", ctx.ym);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.company);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.companies);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.yrmonth);\n        i0.ɵɵadvance(25);\n        i0.ɵɵproperty(\"ngForOf\", ctx.tr);\n      }\n    },\n    directives: [i3.IonHeader, i3.IonToolbar, i3.IonButtons, i3.IonMenuButton, i3.IonContent, i3.IonRefresher, i3.IonRefresherContent, i3.IonList, i3.IonListHeader, i3.IonLabel, i3.IonItem, i3.IonDatetime, i3.SelectValueAccessor, i4.NgControlStatus, i4.NgModel, i3.IonSelect, i5.NgForOf, i3.IonGrid, i3.IonRow, i3.IonCol, i3.IonBadge, i3.IonSelectOption],\n    styles: [\"@font-face{font-family:Poetsen One;font-style:normal;font-weight:300;font-display:swap;src:url(/assets/fonts/PoetsenOne-Regular.ttf)}ion-list-header[_ngcontent-%COMP%]{color:#202945;font-weight:500;font-family:Poetsen One;font-size:larger;text-align:center;margin-left:-10px!important}.tblclass[_ngcontent-%COMP%]{margin:0}button[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{text-transform:none}.head[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-family:Poetsen One}.header[_ngcontent-%COMP%], .header-r[_ngcontent-%COMP%]{border:1px solid #000;font-size:12px;text-align:center;background-color:#ffb444;font-family:Poetsen One}.header-r[_ngcontent-%COMP%]{border-right:0!important}.header1[_ngcontent-%COMP%], .header-r1[_ngcontent-%COMP%]{border:1px solid #000;border-top:0!important;font-size:10px;text-align:right;padding-bottom:13px;text-decoration:underline;background-color:#d5d5d5}.header-r1[_ngcontent-%COMP%]{border-right:0!important}ion-item[_ngcontent-%COMP%]{font-size:14px}ion-badge[_ngcontent-%COMP%]{font-size:8px;margin-right:1.5px;margin-bottom:5px}.ionactive[_ngcontent-%COMP%]{background-color:#fff}.ionactive[_ngcontent-%COMP%], .ionactivesuper[_ngcontent-%COMP%]{color:#202945;border:1px solid #000}.ionactivesuper[_ngcontent-%COMP%]{background-color:#ffe61b}.ionactivework[_ngcontent-%COMP%]{background-color:#ff8c5d;color:#ffe61b;border:1px solid #000}.ionactivesuperwork[_ngcontent-%COMP%]{background-color:#ffb44b;color:#202945;border:1px solid #000}\"]\n  });\n  return BcbaCalendarPage;\n})();","map":null,"metadata":{},"sourceType":"module"}