{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { WorkScheduleDetailsPage } from '../work-schedule-details/work-schedule-details.page';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../../providers/post-provider.service\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\n\nfunction WorkSchedulePage_ion_row_38_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-row\");\n    i0.ɵɵelementStart(1, \"ion-col\", 13);\n    i0.ɵɵlistener(\"click\", function WorkSchedulePage_ion_row_38_Template_ion_col_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const t_r1 = restoredCtx.$implicit;\n      const i_r2 = restoredCtx.index;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.presentActionSheet(t_r1[0], ctx_r3.dateView[i_r2][0]);\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ion-col\", 13);\n    i0.ɵɵlistener(\"click\", function WorkSchedulePage_ion_row_38_Template_ion_col_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const t_r1 = restoredCtx.$implicit;\n      const i_r2 = restoredCtx.index;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.presentActionSheet(t_r1[1], ctx_r5.dateView[i_r2][1]);\n    });\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"ion-col\", 13);\n    i0.ɵɵlistener(\"click\", function WorkSchedulePage_ion_row_38_Template_ion_col_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const t_r1 = restoredCtx.$implicit;\n      const i_r2 = restoredCtx.index;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.presentActionSheet(t_r1[2], ctx_r6.dateView[i_r2][2]);\n    });\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"ion-col\", 13);\n    i0.ɵɵlistener(\"click\", function WorkSchedulePage_ion_row_38_Template_ion_col_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const t_r1 = restoredCtx.$implicit;\n      const i_r2 = restoredCtx.index;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.presentActionSheet(t_r1[3], ctx_r7.dateView[i_r2][3]);\n    });\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"ion-col\", 13);\n    i0.ɵɵlistener(\"click\", function WorkSchedulePage_ion_row_38_Template_ion_col_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const t_r1 = restoredCtx.$implicit;\n      const i_r2 = restoredCtx.index;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.presentActionSheet(t_r1[4], ctx_r8.dateView[i_r2][4]);\n    });\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"ion-col\", 13);\n    i0.ɵɵlistener(\"click\", function WorkSchedulePage_ion_row_38_Template_ion_col_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const t_r1 = restoredCtx.$implicit;\n      const i_r2 = restoredCtx.index;\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.presentActionSheet(t_r1[5], ctx_r9.dateView[i_r2][5]);\n    });\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"ion-col\", 13);\n    i0.ɵɵlistener(\"click\", function WorkSchedulePage_ion_row_38_Template_ion_col_click_13_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const t_r1 = restoredCtx.$implicit;\n      const i_r2 = restoredCtx.index;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.presentActionSheet(t_r1[6], ctx_r10.dateView[i_r2][6]);\n    });\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const t_r1 = ctx.$implicit;\n    const i_r2 = ctx.index;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"header-r1 ion\", ctx_r0.arrColor[i_r2][0], \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(t_r1[0]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"header-r1 ion\", ctx_r0.arrColor[i_r2][1], \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(t_r1[1]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"header-r1 ion\", ctx_r0.arrColor[i_r2][2], \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(t_r1[2]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"header-r1 ion\", ctx_r0.arrColor[i_r2][3], \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(t_r1[3]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"header-r1 ion\", ctx_r0.arrColor[i_r2][4], \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(t_r1[4]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"header-r1 ion\", ctx_r0.arrColor[i_r2][5], \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(t_r1[5]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"header1 ion\", ctx_r0.arrColor[i_r2][6], \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(t_r1[6]);\n  }\n}\n\nexport let WorkSchedulePage = /*#__PURE__*/(() => {\n  class WorkSchedulePage {\n    constructor(router, postPvd, toastController, menuCtrl, modalController, actionSheetController) {\n      this.router = router;\n      this.postPvd = postPvd;\n      this.toastController = toastController;\n      this.menuCtrl = menuCtrl;\n      this.modalController = modalController;\n      this.actionSheetController = actionSheetController;\n    }\n\n    ngOnInit() {\n      this.ym = new Date().getFullYear().toString() + '-' + (new Date().getMonth() + 1).toString();\n      this.optionsFn();\n    }\n\n    optionsFn() {\n      if (this.ym) {\n        return new Promise(resolve => {\n          let body = {\n            action: 'getrbtsched',\n            ucode: localStorage.getItem(\"UCODE\"),\n            ym: this.ym\n          };\n          this.postPvd.postData(body, localStorage.getItem('HOMELINK')).subscribe(data => {\n            if (data['status'] == 'ok') {\n              this.tr = data['dates'];\n              this.yrmonth = data['details'];\n              this.dateView = data['dateView'];\n              this.arrColor = data['arrColor'];\n              $('#tblData').show();\n              console.log(data);\n            } else {\n              this.openToaste('Error on fetching details.');\n            }\n          });\n        });\n      } else {\n        $('#tblData').hide();\n      }\n    }\n\n    presentActionSheet(day, date) {\n      return __awaiter(this, void 0, void 0, function* () {\n        if (day) {\n          const actionSheet = yield this.actionSheetController.create({\n            header: 'Schedule: ' + date,\n            cssClass: 'match-item-action-sheet',\n            buttons: [{\n              text: 'Supervision Request Lists',\n              cssClass: 'actionSheet',\n              handler: () => {\n                this.openModal(day, 'Supervision Request Lists', this.ym, 'supervision');\n              }\n            }, {\n              text: 'RBT Work Schedule Request Lists',\n              cssClass: 'actionSheet',\n              handler: () => {\n                this.openModal(day, 'RBT Work Schedule Request Lists', this.ym, 'work');\n              }\n            }]\n          });\n          yield actionSheet.present();\n          const {\n            role\n          } = yield actionSheet.onDidDismiss();\n        }\n      });\n    }\n\n    openModal(day, header, yr, type) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const modal = yield this.modalController.create({\n          component: WorkScheduleDetailsPage,\n          componentProps: {\n            title: header,\n            yrmonth: yr,\n            type: type,\n            day: day\n          }\n        });\n        modal.onDidDismiss().then(data => {\n          this.optionsFn();\n        });\n        return yield modal.present();\n      });\n    }\n\n    openToaste(msg) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const toast = yield this.toastController.create({\n          message: '<center>' + msg + '</center>',\n          duration: 2000,\n          color: 'danger'\n        });\n        toast.present();\n      });\n    }\n\n    doRefresh(event) {\n      setTimeout(() => {\n        this.optionsFn();\n        event.target.complete();\n      }, 2000);\n    }\n\n  }\n\n  WorkSchedulePage.ɵfac = function WorkSchedulePage_Factory(t) {\n    return new (t || WorkSchedulePage)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.PostProviderService), i0.ɵɵdirectiveInject(i3.ToastController), i0.ɵɵdirectiveInject(i3.MenuController), i0.ɵɵdirectiveInject(i3.ModalController), i0.ɵɵdirectiveInject(i3.ActionSheetController));\n  };\n\n  WorkSchedulePage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: WorkSchedulePage,\n    selectors: [[\"app-work-schedule\"]],\n    decls: 39,\n    vars: 2,\n    consts: [[\"slot\", \"start\"], [\"autoHide\", \"false\"], [1, \"bg\"], [\"slot\", \"fixed\", 3, \"ionRefresh\"], [\"position\", \"floating\"], [\"display-format\", \"MMMM-YYYY\", 3, \"ngModel\", \"ngModelChange\", \"ionChange\"], [\"id\", \"tblData\", 1, \"tblclass\", 2, \"display\", \"none\"], [1, \"ionactivesuper\"], [1, \"ionactivework\"], [1, \"ionactivesuperwork\"], [\"size\", \"1.7\", 1, \"header-r\"], [\"size\", \"1.7\", 1, \"header\"], [4, \"ngFor\", \"ngForOf\"], [\"button\", \"\", \"size\", \"1.7\", 3, \"click\"]],\n    template: function WorkSchedulePage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\");\n        i0.ɵɵelementStart(1, \"ion-toolbar\");\n        i0.ɵɵelementStart(2, \"ion-buttons\", 0);\n        i0.ɵɵelement(3, \"ion-menu-button\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"ion-content\", 2);\n        i0.ɵɵelementStart(5, \"ion-refresher\", 3);\n        i0.ɵɵlistener(\"ionRefresh\", function WorkSchedulePage_Template_ion_refresher_ionRefresh_5_listener($event) {\n          return ctx.doRefresh($event);\n        });\n        i0.ɵɵelement(6, \"ion-refresher-content\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"ion-list\");\n        i0.ɵɵelementStart(8, \"ion-list-header\");\n        i0.ɵɵelementStart(9, \"ion-label\");\n        i0.ɵɵtext(10, \"My Work Schedule\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"ion-item\");\n        i0.ɵɵelementStart(12, \"ion-label\", 4);\n        i0.ɵɵtext(13, \"Select year and month: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"ion-datetime\", 5);\n        i0.ɵɵlistener(\"ngModelChange\", function WorkSchedulePage_Template_ion_datetime_ngModelChange_14_listener($event) {\n          return ctx.ym = $event;\n        })(\"ionChange\", function WorkSchedulePage_Template_ion_datetime_ionChange_14_listener() {\n          return ctx.optionsFn();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"ion-grid\", 6);\n        i0.ɵɵelementStart(16, \"ion-row\");\n        i0.ɵɵelementStart(17, \"ion-badge\", 7);\n        i0.ɵɵtext(18, \"Supervision\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"ion-badge\", 8);\n        i0.ɵɵtext(20, \"Work Sched\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"ion-badge\", 9);\n        i0.ɵɵtext(22, \"Supervision & Work Sched\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"ion-row\");\n        i0.ɵɵelementStart(24, \"ion-col\", 10);\n        i0.ɵɵtext(25, \"Sun\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"ion-col\", 10);\n        i0.ɵɵtext(27, \"Mon\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"ion-col\", 10);\n        i0.ɵɵtext(29, \"Tue\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"ion-col\", 10);\n        i0.ɵɵtext(31, \"Wed\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"ion-col\", 10);\n        i0.ɵɵtext(33, \"Thu\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"ion-col\", 10);\n        i0.ɵɵtext(35, \"Fri\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"ion-col\", 11);\n        i0.ɵɵtext(37, \"Sat\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(38, WorkSchedulePage_ion_row_38_Template, 15, 28, \"ion-row\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(14);\n        i0.ɵɵproperty(\"ngModel\", ctx.ym);\n        i0.ɵɵadvance(24);\n        i0.ɵɵproperty(\"ngForOf\", ctx.tr);\n      }\n    },\n    directives: [i3.IonHeader, i3.IonToolbar, i3.IonButtons, i3.IonMenuButton, i3.IonContent, i3.IonRefresher, i3.IonRefresherContent, i3.IonList, i3.IonListHeader, i3.IonLabel, i3.IonItem, i3.IonDatetime, i3.SelectValueAccessor, i4.NgControlStatus, i4.NgModel, i3.IonGrid, i3.IonRow, i3.IonBadge, i3.IonCol, i5.NgForOf],\n    styles: [\"ion-list-header[_ngcontent-%COMP%]{color:#202945;font-weight:500;font-family:Poetsen One;font-size:larger;text-align:center;margin-left:-10px!important}.tblclass[_ngcontent-%COMP%]{margin:0;padding-top:15px}button[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{text-transform:none}.head[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-family:Poetsen One}.header[_ngcontent-%COMP%], .header-r[_ngcontent-%COMP%]{border:1px solid #000;font-size:12px;text-align:center;background-color:#ffb444;font-family:Poetsen One}.header-r[_ngcontent-%COMP%]{border-right:0!important}.header1[_ngcontent-%COMP%], .header-r1[_ngcontent-%COMP%]{border:1px solid #000;border-top:0!important;font-size:10px;text-align:right;padding-bottom:13px;text-decoration:underline;background-color:#d5d5d5}.header-r1[_ngcontent-%COMP%]{border-right:0!important}ion-item[_ngcontent-%COMP%]{font-size:14px}ion-badge[_ngcontent-%COMP%]{font-size:8px;margin-right:1.5px;margin-bottom:5px}.ionactive[_ngcontent-%COMP%]{background-color:#fff}.ionactive[_ngcontent-%COMP%], .ionactivesuper[_ngcontent-%COMP%]{color:#202945;border:1px solid #000}.ionactivesuper[_ngcontent-%COMP%]{background-color:#ffe61b}.ionactivework[_ngcontent-%COMP%]{background-color:#ff8c5d;color:#ffe61b;border:1px solid #000}.ionactivesuperwork[_ngcontent-%COMP%]{background-color:#ffb44b;color:#202945;border:1px solid #000}.bg[_ngcontent-%COMP%]{background-color:#fff}\"]\n  });\n  return WorkSchedulePage;\n})();","map":null,"metadata":{},"sourceType":"module"}